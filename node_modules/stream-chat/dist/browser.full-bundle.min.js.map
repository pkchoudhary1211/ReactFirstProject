{"version":3,"file":"browser.full-bundle.min.js","sources":["../node_modules/@babel/runtime/helpers/extends.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../node_modules/regenerator-runtime/runtime.js","../node_modules/@babel/runtime/helpers/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/axios/lib/helpers/bind.js","../node_modules/axios/lib/utils.js","../node_modules/axios/node_modules/is-buffer/index.js","../node_modules/axios/lib/core/createError.js","../node_modules/axios/lib/core/enhanceError.js","../node_modules/axios/lib/helpers/buildURL.js","../node_modules/axios/lib/helpers/parseHeaders.js","../node_modules/axios/lib/helpers/isURLSameOrigin.js","../node_modules/axios/lib/helpers/cookies.js","../node_modules/axios/lib/adapters/xhr.js","../node_modules/axios/lib/core/settle.js","../node_modules/axios/lib/defaults.js","../node_modules/axios/lib/helpers/normalizeHeaderName.js","../node_modules/axios/lib/core/InterceptorManager.js","../node_modules/axios/lib/core/transformData.js","../node_modules/axios/lib/cancel/isCancel.js","../node_modules/axios/lib/core/dispatchRequest.js","../node_modules/axios/lib/helpers/combineURLs.js","../node_modules/axios/lib/helpers/isAbsoluteURL.js","../node_modules/axios/lib/core/Axios.js","../node_modules/axios/lib/cancel/Cancel.js","../node_modules/axios/lib/cancel/CancelToken.js","../node_modules/axios/lib/axios.js","../node_modules/axios/lib/helpers/spread.js","../node_modules/uuid/lib/bytesToUuid.js","../node_modules/axios/index.js","../node_modules/uuid/lib/rng-browser.js","../node_modules/uuid/v4.js","../node_modules/seamless-immutable/seamless-immutable.development.js","../src/channel_state.js","../src/events.js","../src/utils.js","../src/channel.js","../src/client_state.js","../node_modules/isomorphic-ws/browser.js","../src/connection.js","../jsonwebtoken","../crypto","../src/signing.js","../http","../https","../node_modules/cross-fetch/dist/browser-ponyfill.js","../node_modules/form-data/lib/browser.js","../src/client.js"],"sourcesContent":["function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\nvar isBuffer = require('is-buffer');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && navigator.product === 'ReactNative') {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim\n};\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\nmodule.exports = function isBuffer (obj) {\n  return obj != null && obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n  error.request = request;\n  error.response = response;\n  return error;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    var msie = /(msie|trident)/i.test(navigator.userAgent);\n    var urlParsingNode = document.createElement('a');\n    var originURL;\n\n    /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      var href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n                  urlParsingNode.pathname :\n                  '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n  (function standardBrowserEnv() {\n    return {\n      write: function write(name, value, expires, path, domain, secure) {\n        var cookie = [];\n        cookie.push(name + '=' + encodeURIComponent(value));\n\n        if (utils.isNumber(expires)) {\n          cookie.push('expires=' + new Date(expires).toGMTString());\n        }\n\n        if (utils.isString(path)) {\n          cookie.push('path=' + path);\n        }\n\n        if (utils.isString(domain)) {\n          cookie.push('domain=' + domain);\n        }\n\n        if (secure === true) {\n          cookie.push('secure');\n        }\n\n        document.cookie = cookie.join('; ');\n      },\n\n      read: function read(name) {\n        var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n        return (match ? decodeURIComponent(match[3]) : null);\n      },\n\n      remove: function remove(name) {\n        this.write(name, '', Date.now() - 86400000);\n      }\n    };\n  })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return {\n      write: function write() {},\n      read: function read() { return null; },\n      remove: function remove() {}\n    };\n  })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?\n          cookies.read(config.xsrfCookieName) :\n          undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (config.withCredentials) {\n      request.withCredentials = true;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  // Note: status is not exposed by XDomainRequest\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\nvar isAbsoluteURL = require('./../helpers/isAbsoluteURL');\nvar combineURLs = require('./../helpers/combineURLs');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Support baseURL config\n  if (config.baseURL && !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers || {}\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\nvar defaults = require('./../defaults');\nvar utils = require('./../utils');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = utils.merge({\n      url: arguments[0]\n    }, arguments[1]);\n  }\n\n  config = utils.merge(defaults, {method: 'get'}, this.defaults, config);\n  config.method = config.method.toLowerCase();\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(utils.merge(defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","module.exports = require('./lib/axios');","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","(function() {\n  \"use strict\";\n\nfunction immutableInit(config) {\n\n  // https://github.com/facebook/react/blob/v15.0.1/src/isomorphic/classic/element/ReactElement.js#L21\n  var REACT_ELEMENT_TYPE = typeof Symbol === 'function' && Symbol.for && Symbol.for('react.element');\n  var REACT_ELEMENT_TYPE_FALLBACK = 0xeac7;\n\n  var globalConfig = {\n    use_static: false\n  };\n  if (isObject(config)) {\n      if (config.use_static !== undefined) {\n          globalConfig.use_static = Boolean(config.use_static);\n      }\n  }\n\n  function isObject(data) {\n    return (\n      typeof data === 'object' &&\n      !Array.isArray(data) &&\n      data !== null\n    );\n  }\n\n  function instantiateEmptyObject(obj) {\n      var prototype = Object.getPrototypeOf(obj);\n      if (!prototype) {\n          return {};\n      } else {\n          return Object.create(prototype);\n      }\n  }\n\n  function addPropertyTo(target, methodName, value) {\n    Object.defineProperty(target, methodName, {\n      enumerable: false,\n      configurable: false,\n      writable: false,\n      value: value\n    });\n  }\n\n  function banProperty(target, methodName) {\n    addPropertyTo(target, methodName, function() {\n      throw new ImmutableError(\"The \" + methodName +\n        \" method cannot be invoked on an Immutable data structure.\");\n    });\n  }\n\n  var immutabilityTag = \"__immutable_invariants_hold\";\n\n  function addImmutabilityTag(target) {\n    addPropertyTo(target, immutabilityTag, true);\n  }\n\n  function isImmutable(target) {\n    if (typeof target === \"object\") {\n      return target === null || Boolean(\n        Object.getOwnPropertyDescriptor(target, immutabilityTag)\n      );\n    } else {\n      // In JavaScript, only objects are even potentially mutable.\n      // strings, numbers, null, and undefined are all naturally immutable.\n      return true;\n    }\n  }\n\n  function isEqual(a, b) {\n    // Avoid false positives due to (NaN !== NaN) evaluating to true\n    return (a === b || (a !== a && b !== b));\n  }\n\n  function isMergableObject(target) {\n    return target !== null && typeof target === \"object\" && !(Array.isArray(target)) && !(target instanceof Date);\n  }\n\n  var mutatingObjectMethods = [\n    \"setPrototypeOf\"\n  ];\n\n  var nonMutatingObjectMethods = [\n    \"keys\"\n  ];\n\n  var mutatingArrayMethods = mutatingObjectMethods.concat([\n    \"push\", \"pop\", \"sort\", \"splice\", \"shift\", \"unshift\", \"reverse\"\n  ]);\n\n  var nonMutatingArrayMethods = nonMutatingObjectMethods.concat([\n    \"map\", \"filter\", \"slice\", \"concat\", \"reduce\", \"reduceRight\"\n  ]);\n\n  var mutatingDateMethods = mutatingObjectMethods.concat([\n    \"setDate\", \"setFullYear\", \"setHours\", \"setMilliseconds\", \"setMinutes\", \"setMonth\", \"setSeconds\",\n    \"setTime\", \"setUTCDate\", \"setUTCFullYear\", \"setUTCHours\", \"setUTCMilliseconds\", \"setUTCMinutes\",\n    \"setUTCMonth\", \"setUTCSeconds\", \"setYear\"\n  ]);\n\n  function ImmutableError(message) {\n    this.name = 'MyError';\n    this.message = message;\n    this.stack = (new Error()).stack;\n  }\n  ImmutableError.prototype = new Error();\n  ImmutableError.prototype.constructor = Error;\n\n  function makeImmutable(obj, bannedMethods) {\n    // Tag it so we can quickly tell it's immutable later.\n    addImmutabilityTag(obj);\n\n    if (\"development\" !== \"production\") {\n      // Make all mutating methods throw exceptions.\n      for (var index in bannedMethods) {\n        if (bannedMethods.hasOwnProperty(index)) {\n          banProperty(obj, bannedMethods[index]);\n        }\n      }\n\n      // Freeze it and return it.\n      Object.freeze(obj);\n    }\n\n    return obj;\n  }\n\n  function makeMethodReturnImmutable(obj, methodName) {\n    var currentMethod = obj[methodName];\n\n    addPropertyTo(obj, methodName, function() {\n      return Immutable(currentMethod.apply(obj, arguments));\n    });\n  }\n\n  function arraySet(idx, value, config) {\n    var deep          = config && config.deep;\n\n    if (idx in this) {\n      if (deep && this[idx] !== value && isMergableObject(value) && isMergableObject(this[idx])) {\n        value = Immutable.merge(this[idx], value, {deep: true, mode: 'replace'});\n      }\n      if (isEqual(this[idx], value)) {\n        return this;\n      }\n    }\n\n    var mutable = asMutableArray.call(this);\n    mutable[idx] = Immutable(value);\n    return makeImmutableArray(mutable);\n  }\n\n  var immutableEmptyArray = Immutable([]);\n\n  function arraySetIn(pth, value, config) {\n    var head = pth[0];\n\n    if (pth.length === 1) {\n      return arraySet.call(this, head, value, config);\n    } else {\n      var tail = pth.slice(1);\n      var thisHead = this[head];\n      var newValue;\n\n      if (typeof(thisHead) === \"object\" && thisHead !== null) {\n        // Might (validly) be object or array\n        newValue = Immutable.setIn(thisHead, tail, value);\n      } else {\n        var nextHead = tail[0];\n        // If the next path part is a number, then we are setting into an array, else an object.\n        if (nextHead !== '' && isFinite(nextHead)) {\n          newValue = arraySetIn.call(immutableEmptyArray, tail, value);\n        } else {\n          newValue = objectSetIn.call(immutableEmptyObject, tail, value);\n        }\n      }\n\n      if (head in this && thisHead === newValue) {\n        return this;\n      }\n\n      var mutable = asMutableArray.call(this);\n      mutable[head] = newValue;\n      return makeImmutableArray(mutable);\n    }\n  }\n\n  function makeImmutableArray(array) {\n    // Don't change their implementations, but wrap these functions to make sure\n    // they always return an immutable value.\n    for (var index in nonMutatingArrayMethods) {\n      if (nonMutatingArrayMethods.hasOwnProperty(index)) {\n        var methodName = nonMutatingArrayMethods[index];\n        makeMethodReturnImmutable(array, methodName);\n      }\n    }\n\n    if (!globalConfig.use_static) {\n      addPropertyTo(array, \"flatMap\",  flatMap);\n      addPropertyTo(array, \"asObject\", asObject);\n      addPropertyTo(array, \"asMutable\", asMutableArray);\n      addPropertyTo(array, \"set\", arraySet);\n      addPropertyTo(array, \"setIn\", arraySetIn);\n      addPropertyTo(array, \"update\", update);\n      addPropertyTo(array, \"updateIn\", updateIn);\n      addPropertyTo(array, \"getIn\", getIn);\n    }\n\n    for(var i = 0, length = array.length; i < length; i++) {\n      array[i] = Immutable(array[i]);\n    }\n\n    return makeImmutable(array, mutatingArrayMethods);\n  }\n\n  function makeImmutableDate(date) {\n    if (!globalConfig.use_static) {\n      addPropertyTo(date, \"asMutable\", asMutableDate);\n    }\n\n    return makeImmutable(date, mutatingDateMethods);\n  }\n\n  function asMutableDate() {\n    return new Date(this.getTime());\n  }\n\n  /**\n   * Effectively performs a map() over the elements in the array, using the\n   * provided iterator, except that whenever the iterator returns an array, that\n   * array's elements are added to the final result instead of the array itself.\n   *\n   * @param {function} iterator - The iterator function that will be invoked on each element in the array. It will receive three arguments: the current value, the current index, and the current object.\n   */\n  function flatMap(iterator) {\n    // Calling .flatMap() with no arguments is a no-op. Don't bother cloning.\n    if (arguments.length === 0) {\n      return this;\n    }\n\n    var result = [],\n        length = this.length,\n        index;\n\n    for (index = 0; index < length; index++) {\n      var iteratorResult = iterator(this[index], index, this);\n\n      if (Array.isArray(iteratorResult)) {\n        // Concatenate Array results into the return value we're building up.\n        result.push.apply(result, iteratorResult);\n      } else {\n        // Handle non-Array results the same way map() does.\n        result.push(iteratorResult);\n      }\n    }\n\n    return makeImmutableArray(result);\n  }\n\n  /**\n   * Returns an Immutable copy of the object without the given keys included.\n   *\n   * @param {array} keysToRemove - A list of strings representing the keys to exclude in the return value. Instead of providing a single array, this method can also be called by passing multiple strings as separate arguments.\n   */\n  function without(remove) {\n    // Calling .without() with no arguments is a no-op. Don't bother cloning.\n    if (typeof remove === \"undefined\" && arguments.length === 0) {\n      return this;\n    }\n\n    if (typeof remove !== \"function\") {\n      // If we weren't given an array, use the arguments list.\n      var keysToRemoveArray = (Array.isArray(remove)) ?\n         remove.slice() : Array.prototype.slice.call(arguments);\n\n      // Convert numeric keys to strings since that's how they'll\n      // come from the enumeration of the object.\n      keysToRemoveArray.forEach(function(el, idx, arr) {\n        if(typeof(el) === \"number\") {\n          arr[idx] = el.toString();\n        }\n      });\n\n      remove = function(val, key) {\n        return keysToRemoveArray.indexOf(key) !== -1;\n      };\n    }\n\n    var result = instantiateEmptyObject(this);\n\n    for (var key in this) {\n      if (this.hasOwnProperty(key) && remove(this[key], key) === false) {\n        result[key] = this[key];\n      }\n    }\n\n    return makeImmutableObject(result);\n  }\n\n  function asMutableArray(opts) {\n    var result = [], i, length;\n\n    if(opts && opts.deep) {\n      for(i = 0, length = this.length; i < length; i++) {\n        result.push(asDeepMutable(this[i]));\n      }\n    } else {\n      for(i = 0, length = this.length; i < length; i++) {\n        result.push(this[i]);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Effectively performs a [map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map) over the elements in the array, expecting that the iterator function\n   * will return an array of two elements - the first representing a key, the other\n   * a value. Then returns an Immutable Object constructed of those keys and values.\n   *\n   * @param {function} iterator - A function which should return an array of two elements - the first representing the desired key, the other the desired value.\n   */\n  function asObject(iterator) {\n    // If no iterator was provided, assume the identity function\n    // (suggesting this array is already a list of key/value pairs.)\n    if (typeof iterator !== \"function\") {\n      iterator = function(value) { return value; };\n    }\n\n    var result = {},\n        length = this.length,\n        index;\n\n    for (index = 0; index < length; index++) {\n      var pair  = iterator(this[index], index, this),\n          key   = pair[0],\n          value = pair[1];\n\n      result[key] = value;\n    }\n\n    return makeImmutableObject(result);\n  }\n\n  function asDeepMutable(obj) {\n    if (\n      (!obj) ||\n      (typeof obj !== 'object') ||\n      (!Object.getOwnPropertyDescriptor(obj, immutabilityTag)) ||\n      (obj instanceof Date)\n    ) { return obj; }\n    return Immutable.asMutable(obj, {deep: true});\n  }\n\n  function quickCopy(src, dest) {\n    for (var key in src) {\n      if (Object.getOwnPropertyDescriptor(src, key)) {\n        dest[key] = src[key];\n      }\n    }\n\n    return dest;\n  }\n\n  /**\n   * Returns an Immutable Object containing the properties and values of both\n   * this object and the provided object, prioritizing the provided object's\n   * values whenever the same key is present in both objects.\n   *\n   * @param {object} other - The other object to merge. Multiple objects can be passed as an array. In such a case, the later an object appears in that list, the higher its priority.\n   * @param {object} config - Optional config object that contains settings. Supported settings are: {deep: true} for deep merge and {merger: mergerFunc} where mergerFunc is a function\n   *                          that takes a property from both objects. If anything is returned it overrides the normal merge behaviour.\n   */\n  function merge(other, config) {\n    // Calling .merge() with no arguments is a no-op. Don't bother cloning.\n    if (arguments.length === 0) {\n      return this;\n    }\n\n    if (other === null || (typeof other !== \"object\")) {\n      throw new TypeError(\"Immutable#merge can only be invoked with objects or arrays, not \" + JSON.stringify(other));\n    }\n\n    var receivedArray = (Array.isArray(other)),\n        deep          = config && config.deep,\n        mode          = config && config.mode || 'merge',\n        merger        = config && config.merger,\n        result;\n\n    // Use the given key to extract a value from the given object, then place\n    // that value in the result object under the same key. If that resulted\n    // in a change from this object's value at that key, set anyChanges = true.\n    function addToResult(currentObj, otherObj, key) {\n      var immutableValue = Immutable(otherObj[key]);\n      var mergerResult = merger && merger(currentObj[key], immutableValue, config);\n      var currentValue = currentObj[key];\n\n      if ((result !== undefined) ||\n        (mergerResult !== undefined) ||\n        (!currentObj.hasOwnProperty(key)) ||\n        !isEqual(immutableValue, currentValue)) {\n\n        var newValue;\n\n        if (mergerResult !== undefined) {\n          newValue = mergerResult;\n        } else if (deep && isMergableObject(currentValue) && isMergableObject(immutableValue)) {\n          newValue = Immutable.merge(currentValue, immutableValue, config);\n        } else {\n          newValue = immutableValue;\n        }\n\n        if (!isEqual(currentValue, newValue) || !currentObj.hasOwnProperty(key)) {\n          if (result === undefined) {\n            // Make a shallow clone of the current object.\n            result = quickCopy(currentObj, instantiateEmptyObject(currentObj));\n          }\n\n          result[key] = newValue;\n        }\n      }\n    }\n\n    function clearDroppedKeys(currentObj, otherObj) {\n      for (var key in currentObj) {\n        if (!otherObj.hasOwnProperty(key)) {\n          if (result === undefined) {\n            // Make a shallow clone of the current object.\n            result = quickCopy(currentObj, instantiateEmptyObject(currentObj));\n          }\n          delete result[key];\n        }\n      }\n    }\n\n    var key;\n\n    // Achieve prioritization by overriding previous values that get in the way.\n    if (!receivedArray) {\n      // The most common use case: just merge one object into the existing one.\n      for (key in other) {\n        if (Object.getOwnPropertyDescriptor(other, key)) {\n          addToResult(this, other, key);\n        }\n      }\n      if (mode === 'replace') {\n        clearDroppedKeys(this, other);\n      }\n    } else {\n      // We also accept an Array\n      for (var index = 0, length = other.length; index < length; index++) {\n        var otherFromArray = other[index];\n\n        for (key in otherFromArray) {\n          if (otherFromArray.hasOwnProperty(key)) {\n            addToResult(result !== undefined ? result : this, otherFromArray, key);\n          }\n        }\n      }\n    }\n\n    if (result === undefined) {\n      return this;\n    } else {\n      return makeImmutableObject(result);\n    }\n  }\n\n  function objectReplace(value, config) {\n    var deep          = config && config.deep;\n\n    // Calling .replace() with no arguments is a no-op. Don't bother cloning.\n    if (arguments.length === 0) {\n      return this;\n    }\n\n    if (value === null || typeof value !== \"object\") {\n      throw new TypeError(\"Immutable#replace can only be invoked with objects or arrays, not \" + JSON.stringify(value));\n    }\n\n    return Immutable.merge(this, value, {deep: deep, mode: 'replace'});\n  }\n\n  var immutableEmptyObject = Immutable({});\n\n  function objectSetIn(path, value, config) {\n    if (!(Array.isArray(path)) || path.length === 0) {\n      throw new TypeError(\"The first argument to Immutable#setIn must be an array containing at least one \\\"key\\\" string.\");\n    }\n\n    var head = path[0];\n    if (path.length === 1) {\n      return objectSet.call(this, head, value, config);\n    }\n\n    var tail = path.slice(1);\n    var newValue;\n    var thisHead = this[head];\n\n    if (this.hasOwnProperty(head) && typeof(thisHead) === \"object\" && thisHead !== null) {\n      // Might (validly) be object or array\n      newValue = Immutable.setIn(thisHead, tail, value);\n    } else {\n      newValue = objectSetIn.call(immutableEmptyObject, tail, value);\n    }\n\n    if (this.hasOwnProperty(head) && thisHead === newValue) {\n      return this;\n    }\n\n    var mutable = quickCopy(this, instantiateEmptyObject(this));\n    mutable[head] = newValue;\n    return makeImmutableObject(mutable);\n  }\n\n  function objectSet(property, value, config) {\n    var deep          = config && config.deep;\n\n    if (this.hasOwnProperty(property)) {\n      if (deep && this[property] !== value && isMergableObject(value) && isMergableObject(this[property])) {\n        value = Immutable.merge(this[property], value, {deep: true, mode: 'replace'});\n      }\n      if (isEqual(this[property], value)) {\n        return this;\n      }\n    }\n\n    var mutable = quickCopy(this, instantiateEmptyObject(this));\n    mutable[property] = Immutable(value);\n    return makeImmutableObject(mutable);\n  }\n\n  function update(property, updater) {\n    var restArgs = Array.prototype.slice.call(arguments, 2);\n    var initialVal = this[property];\n    return Immutable.set(this, property, updater.apply(initialVal, [initialVal].concat(restArgs)));\n  }\n\n  function getInPath(obj, path) {\n    /*jshint eqnull:true */\n    for (var i = 0, l = path.length; obj != null && i < l; i++) {\n      obj = obj[path[i]];\n    }\n\n    return (i && i == l) ? obj : undefined;\n  }\n\n  function updateIn(path, updater) {\n    var restArgs = Array.prototype.slice.call(arguments, 2);\n    var initialVal = getInPath(this, path);\n\n    return Immutable.setIn(this, path, updater.apply(initialVal, [initialVal].concat(restArgs)));\n  }\n\n  function getIn(path, defaultValue) {\n    var value = getInPath(this, path);\n    return value === undefined ? defaultValue : value;\n  }\n\n  function asMutableObject(opts) {\n    var result = instantiateEmptyObject(this), key;\n\n    if(opts && opts.deep) {\n      for (key in this) {\n        if (this.hasOwnProperty(key)) {\n          result[key] = asDeepMutable(this[key]);\n        }\n      }\n    } else {\n      for (key in this) {\n        if (this.hasOwnProperty(key)) {\n          result[key] = this[key];\n        }\n      }\n    }\n\n    return result;\n  }\n\n  // Creates plain object to be used for cloning\n  function instantiatePlainObject() {\n    return {};\n  }\n\n  // Finalizes an object with immutable methods, freezes it, and returns it.\n  function makeImmutableObject(obj) {\n    if (!globalConfig.use_static) {\n      addPropertyTo(obj, \"merge\", merge);\n      addPropertyTo(obj, \"replace\", objectReplace);\n      addPropertyTo(obj, \"without\", without);\n      addPropertyTo(obj, \"asMutable\", asMutableObject);\n      addPropertyTo(obj, \"set\", objectSet);\n      addPropertyTo(obj, \"setIn\", objectSetIn);\n      addPropertyTo(obj, \"update\", update);\n      addPropertyTo(obj, \"updateIn\", updateIn);\n      addPropertyTo(obj, \"getIn\", getIn);\n    }\n\n    return makeImmutable(obj, mutatingObjectMethods);\n  }\n\n  // Returns true if object is a valid react element\n  // https://github.com/facebook/react/blob/v15.0.1/src/isomorphic/classic/element/ReactElement.js#L326\n  function isReactElement(obj) {\n    return typeof obj === 'object' &&\n           obj !== null &&\n           (obj.$$typeof === REACT_ELEMENT_TYPE_FALLBACK || obj.$$typeof === REACT_ELEMENT_TYPE);\n  }\n\n  function isFileObject(obj) {\n    return typeof File !== 'undefined' &&\n           obj instanceof File;\n  }\n\n  function isBlobObject(obj) {\n    return typeof Blob !== 'undefined' &&\n           obj instanceof Blob;\n  }\n\n  function isPromise(obj) {\n    return typeof obj === 'object' &&\n           typeof obj.then === 'function';\n  }\n\n  function isError(obj) {\n    return obj instanceof Error;\n  }\n\n  function Immutable(obj, options, stackRemaining) {\n    if (isImmutable(obj) || isReactElement(obj) || isFileObject(obj) || isBlobObject(obj) || isError(obj)) {\n      return obj;\n    } else if (isPromise(obj)) {\n      return obj.then(Immutable);\n    } else if (Array.isArray(obj)) {\n      return makeImmutableArray(obj.slice());\n    } else if (obj instanceof Date) {\n      return makeImmutableDate(new Date(obj.getTime()));\n    } else {\n      // Don't freeze the object we were given; make a clone and use that.\n      var prototype = options && options.prototype;\n      var instantiateEmptyObject =\n        (!prototype || prototype === Object.prototype) ?\n          instantiatePlainObject : (function() { return Object.create(prototype); });\n      var clone = instantiateEmptyObject();\n\n      if (\"development\" !== \"production\") {\n        /*jshint eqnull:true */\n        if (stackRemaining == null) {\n          stackRemaining = 64;\n        }\n        if (stackRemaining <= 0) {\n          throw new ImmutableError(\"Attempt to construct Immutable from a deeply nested object was detected.\" +\n            \" Have you tried to wrap an object with circular references (e.g. React element)?\" +\n            \" See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.\");\n        }\n        stackRemaining -= 1;\n      }\n\n      for (var key in obj) {\n        if (Object.getOwnPropertyDescriptor(obj, key)) {\n          clone[key] = Immutable(obj[key], undefined, stackRemaining);\n        }\n      }\n\n      return makeImmutableObject(clone);\n    }\n  }\n\n  // Wrapper to allow the use of object methods as static methods of Immutable.\n  function toStatic(fn) {\n    function staticWrapper() {\n      var args = [].slice.call(arguments);\n      var self = args.shift();\n      return fn.apply(self, args);\n    }\n\n    return staticWrapper;\n  }\n\n  // Wrapper to allow the use of object methods as static methods of Immutable.\n  // with the additional condition of choosing which function to call depending\n  // if argument is an array or an object.\n  function toStaticObjectOrArray(fnObject, fnArray) {\n    function staticWrapper() {\n      var args = [].slice.call(arguments);\n      var self = args.shift();\n      if (Array.isArray(self)) {\n          return fnArray.apply(self, args);\n      } else {\n          return fnObject.apply(self, args);\n      }\n    }\n\n    return staticWrapper;\n  }\n\n  // Wrapper to allow the use of object methods as static methods of Immutable.\n  // with the additional condition of choosing which function to call depending\n  // if argument is an array or an object or a date.\n  function toStaticObjectOrDateOrArray(fnObject, fnArray, fnDate) {\n    function staticWrapper() {\n      var args = [].slice.call(arguments);\n      var self = args.shift();\n      if (Array.isArray(self)) {\n          return fnArray.apply(self, args);\n      } else if (self instanceof Date) {\n          return fnDate.apply(self, args);\n      } else {\n          return fnObject.apply(self, args);\n      }\n    }\n\n    return staticWrapper;\n  }\n\n  // Export the library\n  Immutable.from           = Immutable;\n  Immutable.isImmutable    = isImmutable;\n  Immutable.ImmutableError = ImmutableError;\n  Immutable.merge          = toStatic(merge);\n  Immutable.replace        = toStatic(objectReplace);\n  Immutable.without        = toStatic(without);\n  Immutable.asMutable      = toStaticObjectOrDateOrArray(asMutableObject, asMutableArray, asMutableDate);\n  Immutable.set            = toStaticObjectOrArray(objectSet, arraySet);\n  Immutable.setIn          = toStaticObjectOrArray(objectSetIn, arraySetIn);\n  Immutable.update         = toStatic(update);\n  Immutable.updateIn       = toStatic(updateIn);\n  Immutable.getIn          = toStatic(getIn);\n  Immutable.flatMap        = toStatic(flatMap);\n  Immutable.asObject       = toStatic(asObject);\n  if (!globalConfig.use_static) {\n      Immutable.static = immutableInit({\n          use_static: true\n      });\n  }\n\n  Object.freeze(Immutable);\n\n  return Immutable;\n}\n\n  var Immutable = immutableInit();\n  /* istanbul ignore if */\n  if (typeof define === 'function' && define.amd) {\n    define(function() {\n      return Immutable;\n    });\n  } else if (typeof module === \"object\") {\n    module.exports = Immutable;\n  } else if (typeof exports === \"object\") {\n    exports.Immutable = Immutable;\n  } else if (typeof window === \"object\") {\n    window.Immutable = Immutable;\n  } else if (typeof global === \"object\") {\n    global.Immutable = Immutable;\n  }\n})();\n","import Immutable from 'seamless-immutable';\n\n/**\n * ChannelState - A container class for the channel state.\n */\n\nfunction byDate(a, b) {\n\treturn a.created_at - b.created_at;\n}\n\nexport class ChannelState {\n\tconstructor(channel) {\n\t\tthis._channel = channel;\n\t\tthis.watcher_count = 0;\n\t\tthis.typing = Immutable({});\n\t\tthis.read = Immutable({});\n\t\tthis.messages = Immutable([]);\n\t\tthis.threads = Immutable({});\n\t\t// a list of users to hide messages from\n\t\tthis.mutedUsers = Immutable([]);\n\t\tthis.watchers = Immutable({});\n\t\tthis.members = Immutable({});\n\t\tthis.last_message_at =\n\t\t\tchannel.last_message_at != null ? new Date(channel.last_message_at) : null;\n\t}\n\n\t/**\n\t * addMessageSorted - Add a message to the state\n\t *\n\t * @param {object} newMessage A new message\n\t *\n\t */\n\taddMessageSorted(newMessage) {\n\t\treturn this.addMessagesSorted([newMessage]);\n\t}\n\n\t/**\n\t * messageToImmutable - Takes the message object. Parses the dates, sets __html\n\t * and sets the status to received if missing. Returns an immutable message object\n\t *\n\t * @param {object} message an Immutable message object\n\t *\n\t */\n\tmessageToImmutable(message) {\n\t\tmessage.__html = message.html;\n\t\t// parse the date..\n\t\tmessage.created_at = new Date(message.created_at);\n\t\tmessage.updated_at = new Date(message.updated_at);\n\t\tif (!message.status) {\n\t\t\tmessage.status = 'received';\n\t\t}\n\t\treturn Immutable(message);\n\t}\n\n\t/**\n\t * addMessagesSorted - Add the list of messages to state and resorts the messages\n\t *\n\t * @param {array}   newMessages    A list of messages\n\t * @param {boolean} initializing   Weather channel is being initialized.\n\t *\n\t */\n\taddMessagesSorted(newMessages, initializing = false) {\n\t\t// parse all the new message dates and add __html for react\n\t\tconst parsedMessages = [];\n\t\tfor (const message of newMessages) {\n\t\t\tif (initializing && this.threads[message.id]) {\n\t\t\t\t// If we are initializing the state of channel (e.g., in case of connection recovery),\n\t\t\t\t// then in that case we remove thread related to this message from threads object.\n\t\t\t\t// This way we can ensure that we don't have any stale data in thread object\n\t\t\t\t// and consumer can refetch the replies.\n\t\t\t\tthis.threads = Immutable.without(this.threads, message.id);\n\t\t\t}\n\t\t\tconst parsedMsg = this.messageToImmutable(message);\n\t\t\tparsedMessages.push(parsedMsg);\n\t\t\tif (parsedMsg.created_at > this.last_message_at) {\n\t\t\t\tthis.last_message_at = parsedMsg.created_at;\n\t\t\t}\n\t\t}\n\n\t\t// update or append the messages...\n\t\tconst updatedThreads = [];\n\t\tfor (const message of parsedMessages) {\n\t\t\tconst isThreadReply = message.parent_id && !message.show_in_channel;\n\t\t\t// add to the main message list\n\t\t\tif (!isThreadReply) {\n\t\t\t\tthis.messages = this._addToMessageList(this.messages, message);\n\t\t\t}\n\t\t\t// add to the thread if applicable..\n\t\t\tconst parentID = message.parent_id;\n\t\t\tif (parentID) {\n\t\t\t\tconst thread = this.threads[parentID] || Immutable([]);\n\t\t\t\tconst threadMessages = this._addToMessageList(thread, message);\n\t\t\t\tthis.threads = this.threads.set(parentID, threadMessages);\n\t\t\t\tupdatedThreads.push(parentID);\n\t\t\t}\n\t\t}\n\n\t\t// Resort the main messages and the threads that changed...\n\t\tconst messages = [...this.messages];\n\t\tmessages.sort(byDate);\n\t\tthis.messages = Immutable(messages);\n\t\tfor (const parentID of updatedThreads) {\n\t\t\tconst threadMessages = this.threads[parentID]\n\t\t\t\t? [...this.threads[parentID]]\n\t\t\t\t: [];\n\t\t\tthreadMessages.sort(byDate);\n\t\t\tthis.threads = this.threads.set(parentID, threadMessages);\n\t\t}\n\t}\n\n\taddReaction(reaction, message) {\n\t\tconst { messages } = this;\n\t\tif (!message) return;\n\t\tconst { parent_id, show_in_channel } = message;\n\n\t\tif (parent_id && this.threads[parent_id]) {\n\t\t\tconst thread = this.threads[parent_id];\n\n\t\t\tfor (let i = 0; i < thread.length; i++) {\n\t\t\t\tlet message = thread[i];\n\t\t\t\tmessage = this._addReactionToMessage(message, reaction);\n\t\t\t\tif (!message) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tthis.threads = this.threads.set(parent_id, thread.set(i, message));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif ((!show_in_channel && !parent_id) || show_in_channel) {\n\t\t\tfor (let i = 0; i < messages.length; i++) {\n\t\t\t\tlet message = messages[i];\n\t\t\t\tmessage = this._addReactionToMessage(message, reaction);\n\t\t\t\tif (!message) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tthis.messages = messages.set(i, message);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t_addReactionToMessage(message, reaction) {\n\t\tconst idMatch = message.id && message.id === reaction.message_id;\n\n\t\tif (!idMatch) {\n\t\t\treturn false;\n\t\t}\n\n\t\tmessage = this._removeReactionFromMessage(message, reaction);\n\t\tif (this._channel.getClient().userID === reaction.user.id) {\n\t\t\tmessage = message.update('own_reactions', (old = []) =>\n\t\t\t\told.concat([reaction]),\n\t\t\t);\n\t\t}\n\t\tmessage = message.update('latest_reactions', (old = []) =>\n\t\t\told.concat([reaction]),\n\t\t);\n\n\t\tmessage = message.updateIn(['reaction_counts', reaction.type], old =>\n\t\t\told ? old + 1 : 1,\n\t\t);\n\n\t\treturn message;\n\t}\n\n\t_removeReactionFromMessage(message, reaction) {\n\t\tconst filterReaction = old =>\n\t\t\told.filter(\n\t\t\t\titem => item.type !== reaction.type || item.user.id !== reaction.user.id,\n\t\t\t);\n\t\tmessage = message.update('own_reactions', filterReaction);\n\t\tmessage = message.update('latest_reactions', filterReaction);\n\t\treturn message;\n\t}\n\n\tremoveReaction(reaction, message) {\n\t\tconst { messages } = this;\n\t\tif (!message) return;\n\t\tconst { parent_id, show_in_channel } = message;\n\n\t\tif (parent_id && this.threads[parent_id]) {\n\t\t\tconst thread = this.threads[parent_id];\n\t\t\tfor (let i = 0; i < thread.length; i++) {\n\t\t\t\tlet message = thread[i];\n\t\t\t\tconst idMatch = message.id && message.id === reaction.message_id;\n\n\t\t\t\tif (!idMatch) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tmessage = this._removeReactionFromMessage(message, reaction);\n\t\t\t\tmessage = message.updateIn(['reaction_counts', reaction.type], old =>\n\t\t\t\t\told ? old - 1 : 0,\n\t\t\t\t);\n\n\t\t\t\tthis.threads = this.threads.set(parent_id, thread.set(i, message));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif ((!show_in_channel && !parent_id) || show_in_channel) {\n\t\t\tfor (let i = 0; i < messages.length; i++) {\n\t\t\t\tlet message = messages[i];\n\t\t\t\tconst idMatch = message.id && message.id === reaction.message_id;\n\n\t\t\t\tif (!idMatch) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tmessage = this._removeReactionFromMessage(message, reaction);\n\t\t\t\tmessage = message.updateIn(['reaction_counts', reaction.type], old =>\n\t\t\t\t\told ? old - 1 : 0,\n\t\t\t\t);\n\n\t\t\t\tthis.messages = messages.set(i, message);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * _addToMessageList - Adds a message to a list of messages, tries to update first, appends if message isnt found\n\t *\n\t * @param {array} messages A list of messages\n\t * @param {object} newMessage The new message\n\t *\n\t */\n\t_addToMessageList(messages, newMessage) {\n\t\tlet updated = false;\n\n\t\tfor (let i = 0; i < messages.length; i++) {\n\t\t\tconst message = messages[i];\n\t\t\tconst idMatch = message.id && newMessage.id && message.id === newMessage.id;\n\n\t\t\tif (idMatch) {\n\t\t\t\tmessages = messages.set(i, newMessage);\n\t\t\t\tupdated = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!updated) {\n\t\t\tmessages = messages.concat([newMessage]);\n\t\t}\n\n\t\treturn messages;\n\t}\n\n\t/**\n\t * removeMessage - Description\n\t *\n\t * @param {type} messageToRemove Object of the message to remove. Needs to have at id specified.\n\t *\n\t * @return {boolean} Returns if the message was removed\n\t */\n\tremoveMessage(messageToRemove) {\n\t\tlet removed = false;\n\t\tconst messages = this.messages.flatMap(message => {\n\t\t\tconst idMatch =\n\t\t\t\tmessage.id && messageToRemove.id && message.id === messageToRemove.id;\n\n\t\t\tif (idMatch) {\n\t\t\t\treturn [];\n\t\t\t} else {\n\t\t\t\tremoved = true;\n\t\t\t\treturn message;\n\t\t\t}\n\t\t});\n\n\t\tthis.messages = messages;\n\t\treturn removed;\n\t}\n\n\t/**\n\t * filterErrorMessages - Removes error messages from the channel state.\n\t *\n\t */\n\tfilterErrorMessages() {\n\t\tconst filteredMessages = this.messages.flatMap(message => {\n\t\t\tif (message.type !== 'error') {\n\t\t\t\treturn message;\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t});\n\n\t\tthis.messages = Immutable(filteredMessages);\n\t}\n\n\t/**\n\t * clean - Remove stale data such as users that stayed in typing state for more than 5 seconds\n\t */\n\tclean() {\n\t\tconst now = new Date();\n\t\t// prevent old users from showing up as typing\n\t\tfor (const [userID, lastEvent] of Object.entries(this.typing)) {\n\t\t\tconst since = now - new Date(lastEvent.received_at);\n\t\t\tif (since > 7000) {\n\t\t\t\tthis.typing = this.typing.without(userID);\n\t\t\t\tthis._channel.getClient().dispatchEvent({\n\t\t\t\t\ttype: 'typing.stop',\n\t\t\t\t\tuser: { id: userID },\n\t\t\t\t\tcid: this._channel.cid,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n","export const EVENT_MAP = {\n\t'user.presence.changed': true,\n\t'user.watching.start': true,\n\t'user.watching.stop': true,\n\t'user.updated': true,\n\t'typing.start': true,\n\t'typing.stop': true,\n\t'message.new': true,\n\t'message.updated': true,\n\t'message.deleted': true,\n\t'message.read': true,\n\t'reaction.new': true,\n\t'reaction.deleted': true,\n\t'member.added': true,\n\t'member.updated': true,\n\t'member.removed': true,\n\t'channel.updated': true,\n\t'channel.deleted': true,\n\t'channel.truncated': true,\n\t'health.check': true,\n\t'notification.message_new': true,\n\t'notification.mark_read': true,\n\t'notification.invited': true,\n\t'notification.invite_accepted': true,\n\t'notification.added_to_channel': true,\n\t'notification.removed_from_channel': true,\n\t'notification.mutes_updated': true,\n\t'notification.channel_deleted': true,\n\t'notification.channel_truncated': true,\n\t// local events\n\t'connection.changed': true,\n\t'connection.recovered': true,\n};\n\nexport function isValidEventType(eventType) {\n\tif (eventType === 'all') {\n\t\treturn true;\n\t}\n\treturn EVENT_MAP[eventType] || false;\n}\n","/**\n * logChatPromiseExecution - utility function for logging the execution of a promise..\n *  use this when you want to run the promise and handle errors by logging a warning\n *\n * @param {type} promise The promise you want to run and log\n * @param {type} name    A descriptive name of what the promise does for log output\n *\n */\n\nexport function logChatPromiseExecution(promise, name) {\n\tpromise\n\t\t.then(() => {\n\t\t\t// do nothing...\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.warn(`failed to do ${name}, ran into error: `, error);\n\t\t});\n}\n\nexport const sleep = m => new Promise(r => setTimeout(r, m));\n","import Immutable from 'seamless-immutable';\nimport { ChannelState } from './channel_state';\nimport { isValidEventType } from './events';\nimport { logChatPromiseExecution } from './utils';\n\n/**\n * Channel - The Channel class manages it's own state.\n */\nexport class Channel {\n\t/**\n\t * constructor - Create a channel\n\t *\n\t * @param {Client} client the chat client\n\t * @param {string} type  the type of channel\n\t * @param {string} [id]  the id of the chat\n\t * @param {type} custom any additional custom params\n\t *\n\t * @return {Channel} Returns a new uninitialized channel\n\t */\n\tconstructor(client, type, id, data) {\n\t\tconst validTypeRe = /^[\\w_-]+$/;\n\t\tconst validIDRe = /^[\\w!_-]+$/;\n\n\t\tif (!validTypeRe.test(type)) {\n\t\t\tthrow new Error(\n\t\t\t\t`Invalid chat type ${type}, letters, numbers and \"_-\" are allowed`,\n\t\t\t);\n\t\t}\n\t\tif (!validIDRe.test(id)) {\n\t\t\tthrow new Error(\n\t\t\t\t`Invalid chat id ${id}, letters, numbers and \"!-_\" are allowed`,\n\t\t\t);\n\t\t}\n\n\t\tthis._client = client;\n\t\tthis.type = type;\n\t\tthis.id = id;\n\t\t// used by the frontend, gets updated:\n\t\tthis.data = data;\n\t\t// this._data is used for the requests...\n\t\tthis._data = { ...data };\n\n\t\tthis.cid = `${type}:${id}`;\n\t\tthis.listeners = {};\n\t\t// perhaps the state variable should be private\n\t\tthis.state = new ChannelState(this);\n\t\tthis.initialized = false;\n\t\tthis.lastTypingEvent = null;\n\t\tthis.isTyping = false;\n\t\tthis.disconnected = false;\n\t}\n\n\t/**\n\t * getClient - Get the chat client for this channel. If client.disconnect() was called, this function will error\n\t *\n\t * @return {object}\n\t */\n\tgetClient() {\n\t\tif (this.disconnected === true) {\n\t\t\tthrow Error(`You can't use a channel after client.disconnect() was called`);\n\t\t}\n\t\treturn this._client;\n\t}\n\n\t/**\n\t * getConfig - Get the configs for this channel type\n\t *\n\t * @return {object}\n\t */\n\tgetConfig() {\n\t\tconst client = this.getClient();\n\t\treturn client.configs[this.type];\n\t}\n\n\t/**\n\t * sendMessage - Send a message to this channel\n\t *\n\t * @param {object} message The Message object\n\t *\n\t * @return {object} The Server Response\n\t */\n\n\tasync sendMessage(message) {\n\t\tconst data = await this.getClient().post(this._channelURL() + '/message', {\n\t\t\tmessage,\n\t\t});\n\t\treturn data;\n\t}\n\n\tsendFile(uri, name, contentType, user) {\n\t\treturn this.getClient().sendFile(\n\t\t\t`${this._channelURL()}/file`,\n\t\t\turi,\n\t\t\tname,\n\t\t\tcontentType,\n\t\t\tuser,\n\t\t);\n\t}\n\n\tsendImage(uri, name, contentType, user) {\n\t\treturn this.getClient().sendFile(\n\t\t\t`${this._channelURL()}/image`,\n\t\t\turi,\n\t\t\tname,\n\t\t\tcontentType,\n\t\t\tuser,\n\t\t);\n\t}\n\n\tdeleteFile(url) {\n\t\treturn this.getClient().delete(`${this._channelURL()}/file`, { url });\n\t}\n\n\tdeleteImage(url) {\n\t\treturn this.getClient().delete(`${this._channelURL()}/image`, { url });\n\t}\n\n\t/**\n\t * sendEvent - Send an event on this channel\n\t *\n\t * @param {object} event for example {type: 'message.read'}\n\t *\n\t * @return {object} The Server Response\n\t */\n\tasync sendEvent(event) {\n\t\tthis._checkInitialized();\n\t\tconst data = await this.getClient().post(this._channelURL() + '/event', {\n\t\t\tevent,\n\t\t});\n\n\t\treturn data;\n\t}\n\n\t/**\n\t * sendReaction - Send a reaction about a message\n\t *\n\t * @param {string} messageID the message id\n\t * @param {object} reaction the reaction object for instance {type: 'love'}\n\t * @param {string} user_id the id of the user (used only for server side request) default null\n\t *\n\t * @return {object} The Server Response\n\t */\n\tasync sendReaction(messageID, reaction, user_id) {\n\t\tif (!messageID) {\n\t\t\tthrow Error(`Message id is missing`);\n\t\t}\n\t\tif (!reaction || Object.keys(reaction).length === 0) {\n\t\t\tthrow Error(`Reaction object is missing`);\n\t\t}\n\t\tconst body = {\n\t\t\treaction,\n\t\t};\n\t\tif (user_id != null) {\n\t\t\tbody.reaction = { ...reaction, user: { id: user_id } };\n\t\t}\n\t\tconst data = await this.getClient().post(\n\t\t\tthis.getClient().baseURL + `/messages/${messageID}/reaction`,\n\t\t\tbody,\n\t\t);\n\t\treturn data;\n\t}\n\n\t/**\n\t * deleteReaction - Delete a reaction by user and type\n\t *\n\t * @param {string} messageID the id of the message from which te remove the reaction\n\t * @param {string} reactionType the type of reaction that should be removed\n\t * @param {string} user_id the id of the user (used only for server side request) default null\n\t *\n\t * @return {object} The Server Response\n\t */\n\tdeleteReaction(messageID, reactionType, user_id) {\n\t\tthis._checkInitialized();\n\t\tif (!reactionType || !messageID) {\n\t\t\tthrow Error(\n\t\t\t\t'Deleting a reaction requires specifying both the message and reaction type',\n\t\t\t);\n\t\t}\n\n\t\tconst url =\n\t\t\tthis.getClient().baseURL + `/messages/${messageID}/reaction/${reactionType}`;\n\t\t//provided when server side request\n\t\tif (user_id) {\n\t\t\treturn this.getClient().delete(url, { user_id });\n\t\t}\n\n\t\treturn this.getClient().delete(url);\n\t}\n\n\t/**\n\t * update - Edit the channel's custom properties\n\t *\n\t * @param {object} custom The object to update the custom properties of this channel with\n\t *\n\t * @return {type} The server response\n\t */\n\tasync update(channelData, updateMessage) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\tmessage: updateMessage,\n\t\t\tdata: channelData,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\t/**\n\t * delete - Delete the channel.. Messages are permanently removed.\n\t *\n\t * @return {object} The server response\n\t */\n\tasync delete() {\n\t\tconst data = await this.getClient().delete(this._channelURL());\n\t\treturn data;\n\t}\n\n\t/**\n\t * truncate - Removes all messages from the channel\n\t *\n\t * @return {object} The server response\n\t */\n\tasync truncate() {\n\t\tconst data = await this.getClient().post(this._channelURL() + '/truncate');\n\t\treturn data;\n\t}\n\n\tasync acceptInvite(options = {}) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\taccept_invite: true,\n\t\t\t...options,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\tasync rejectInvite(options = {}) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\treject_invite: true,\n\t\t\t...options,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\tasync addMembers(members) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\tadd_members: members,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\tasync addModerators(members) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\tadd_moderators: members,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\tasync removeMembers(members) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\tremove_members: members,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\tasync demoteModerators(members) {\n\t\tconst data = await this.getClient().post(this._channelURL(), {\n\t\t\tdemote_moderators: members,\n\t\t});\n\t\tthis.data = data.channel;\n\t\treturn data;\n\t}\n\n\tsendAction(messageID, formData) {\n\t\tthis._checkInitialized();\n\t\tif (!messageID) {\n\t\t\tthrow Error(`Message id is missing`);\n\t\t}\n\t\treturn this.getClient().post(\n\t\t\tthis.getClient().baseURL + `/messages/${messageID}/action`,\n\t\t\t{\n\t\t\t\tmessage_id: messageID,\n\t\t\t\tform_data: formData,\n\t\t\t\tid: this.id,\n\t\t\t\ttype: this.type,\n\t\t\t},\n\t\t);\n\t}\n\n\t/**\n\t * keystroke - First of the typing.start and typing.stop events based on the users keystrokes.\n\t *  Call this on every keystroke\n\t */\n\tasync keystroke() {\n\t\tif (!this.getConfig().typing_events) {\n\t\t\treturn;\n\t\t}\n\t\tconst now = new Date();\n\t\tconst diff = now - this.lastTypingEvent;\n\t\tthis.lastKeyStroke = now;\n\t\tthis.isTyping = true;\n\t\t// send a typing.start every 2 seconds\n\t\tif (diff > 2000) {\n\t\t\tthis.lastTypingEvent = new Date();\n\t\t\tawait this.sendEvent({\n\t\t\t\ttype: 'typing.start',\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * stopTyping - Sets last typing to null and sends the typing.stop event\n\t */\n\tasync stopTyping() {\n\t\tif (!this.getConfig().typing_events) {\n\t\t\treturn;\n\t\t}\n\t\tthis.lastTypingEvent = null;\n\t\tthis.isTyping = false;\n\t\tawait this.sendEvent({\n\t\t\ttype: 'typing.stop',\n\t\t});\n\t}\n\n\t/**\n\t * lastMessage - return the last message, takes into account that last few messages might not be perfectly sorted\n\t *\n\t * @return {type} Description\n\t */\n\tlastMessage() {\n\t\t// get last 5 messages, sort, return the latest\n\t\t// get a slice of the last 5\n\t\tlet min = this.state.messages.length - 5;\n\t\tif (min < 0) {\n\t\t\tmin = 0;\n\t\t}\n\t\tconst max = this.state.messages.length + 1;\n\t\tconst messageSlice = this.state.messages.slice(min, max).asMutable();\n\n\t\t// sort by pk desc\n\t\tmessageSlice.sort((a, b) => b.created_at - a.created_at);\n\n\t\tlet lastMessage;\n\t\tif (messageSlice.length > 0) {\n\t\t\tlastMessage = messageSlice[0];\n\t\t}\n\t\treturn lastMessage;\n\t}\n\n\t/**\n\t * markRead - Send the mark read event for this user, only works if the `read_events` setting is enabled\n\t *\n\t * @return {Promise} Description\n\t */\n\tasync markRead(data = {}) {\n\t\tthis._checkInitialized();\n\n\t\tif (!this.getConfig().read_events) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\tconst response = await this.getClient().post(this._channelURL() + '/read', {\n\t\t\t...data,\n\t\t});\n\n\t\treturn response;\n\t}\n\n\t/**\n\t * clean - Cleans the channel state and fires stop typing if needed\n\t */\n\tclean() {\n\t\tif (this.lastKeyStroke) {\n\t\t\tconst now = new Date();\n\t\t\tconst diff = now - this.lastKeyStroke;\n\t\t\tif (diff > 1000 && this.isTyping) {\n\t\t\t\tlogChatPromiseExecution(this.stopTyping(), 'stop typing event');\n\t\t\t}\n\t\t}\n\n\t\tthis.state.clean();\n\t}\n\n\t/**\n\t * watch - Loads the initial channel state and watches for changes\n\t *\n\t * @param {object} options additional options for the query endpoint\n\t *\n\t * @return {object} The server response\n\t */\n\tasync watch(options) {\n\t\tconst defaultOptions = {\n\t\t\tstate: true,\n\t\t\twatch: true,\n\t\t\tpresence: false,\n\t\t};\n\n\t\t// Make sure we wait for the connect promise if there is a pending one\n\t\tawait this.getClient().wsPromise;\n\n\t\tif (!this.getClient()._hasConnectionID()) {\n\t\t\tdefaultOptions.watch = false;\n\t\t}\n\n\t\tconst combined = { ...defaultOptions, ...options };\n\t\tconst state = await this.query(combined);\n\t\tthis.initialized = true;\n\t\tthis._initializeState(state);\n\t\tthis.data = state.channel;\n\n\t\tthis._client.logger(\n\t\t\t'info',\n\t\t\t`channel:watch() - started watching channel ${this.cid}`,\n\t\t\t{\n\t\t\t\ttags: ['channel'],\n\t\t\t\tchannel: this,\n\t\t\t},\n\t\t);\n\t\treturn state;\n\t}\n\n\t/**\n\t * stopwatching - Stops watching the channel\n\t *\n\t * @return {object} The server response\n\t */\n\tasync stopWatching() {\n\t\tconst response = await this.getClient().post(\n\t\t\tthis._channelURL() + '/stop-watching',\n\t\t\t{},\n\t\t);\n\n\t\tthis._client.logger(\n\t\t\t'info',\n\t\t\t`channel:watch() - stopped watching channel ${this.cid}`,\n\t\t\t{\n\t\t\t\ttags: ['channel'],\n\t\t\t\tchannel: this,\n\t\t\t},\n\t\t);\n\n\t\treturn response;\n\t}\n\n\t/**\n\t * getReplies - List the message replies for a parent message\n\t *\n\t * @param {type} parent_id The message parent id, ie the top of the thread\n\t * @param {type} options   Pagination params, ie {limit:10, idlte: 10}\n\t *\n\t * @return {type} A response with a list of messages\n\t */\n\tasync getReplies(parent_id, options) {\n\t\tconst data = await this.getClient().get(\n\t\t\tthis.getClient().baseURL + `/messages/${parent_id}/replies`,\n\t\t\t{\n\t\t\t\t...options,\n\t\t\t},\n\t\t);\n\n\t\t// add any messages to our thread state\n\t\tif (data.messages) {\n\t\t\tthis.state.addMessagesSorted(data.messages);\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t/**\n\t * getReactions - List the reactions, supports pagination\n\t *\n\t * @param {string} message_id The message id\n\t * @param {object} options    The pagination options\n\t *\n\t * @return {object} Server response\n\t */\n\tasync getReactions(message_id, options) {\n\t\tconst data = await this.getClient().get(\n\t\t\tthis.getClient().baseURL + `/messages/${message_id}/reactions`,\n\t\t\t{\n\t\t\t\t...options,\n\t\t\t},\n\t\t);\n\t\treturn data;\n\t}\n\n\t/**\n\t * lastRead - returns the last time the user marked the channel as read if the user never marked the channel as read, this will return null\n\t * @return {date}\n\t */\n\tlastRead() {\n\t\tthis._checkInitialized();\n\t\treturn this.state.read[this.getClient().userID]\n\t\t\t? this.state.read[this.getClient().userID].last_read\n\t\t\t: null;\n\t}\n\n\t/**\n\t * countUnread - Count the number of messages with a date thats newer than the last read timestamp\n\t *\n\t * @param [date] lastRead the time that the user read a message, defaults to current user's read state\n\t *\n\t * @return {int} Unread count\n\t */\n\tcountUnread(lastRead) {\n\t\tif (lastRead == null) {\n\t\t\tlastRead = this.lastRead();\n\t\t}\n\t\tlet count = 0;\n\t\tfor (const m of this.state.messages) {\n\t\t\tif (this.getClient().userID === m.user.id) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (lastRead == null) {\n\t\t\t\tcount++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (m.created_at > lastRead) {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\t\treturn count;\n\t}\n\n\t/**\n\t * countUnread - Count the number of unread messages mentioning the current user\n\t *\n\t * @return {int} Unread mentions count\n\t */\n\tcountUnreadMentions() {\n\t\tconst lastRead = this.lastRead();\n\t\tlet count = 0;\n\t\tfor (const m of this.state.messages) {\n\t\t\tif (this.getClient().userID === m.user.id) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (lastRead == null) {\n\t\t\t\tcount++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (m.created_at > lastRead) {\n\t\t\t\tif (\n\t\t\t\t\tm.mentioned_users.map(u => u.id).indexOf(this.getClient().userID) !==\n\t\t\t\t\t-1\n\t\t\t\t) {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn count;\n\t}\n\n\t/**\n\t * create - Creates a new channel\n\t *\n\t * @return {type} The Server Reponse\n\t */\n\tcreate = async () => {\n\t\tconst options = {\n\t\t\twatch: false,\n\t\t\tstate: false,\n\t\t\tpresence: false,\n\t\t};\n\t\treturn await this.query(options);\n\t};\n\n\t/**\n\t * query - Query the API, get messages, members or other channel fields\n\t *\n\t * @param {object} options The query options\n\t *\n\t * @return {object} Returns a query response\n\t */\n\tasync query(options) {\n\t\t// Make sure we wait for the connect promise if there is a pending one\n\t\tawait this.getClient().wsPromise;\n\n\t\tlet queryURL = `${this.getClient().baseURL}/channels/${this.type}`;\n\t\tif (this.id) {\n\t\t\tqueryURL += `/${this.id}`;\n\t\t}\n\n\t\tconst state = await this.getClient().post(queryURL + '/query', {\n\t\t\tdata: this._data,\n\t\t\tstate: true,\n\t\t\t...options,\n\t\t});\n\n\t\t// update the channel id if it was missing\n\t\tif (!this.id) {\n\t\t\tthis.id = state.channel.id;\n\t\t\tthis.cid = state.channel.cid;\n\t\t\t// set the channel as active...\n\t\t\tif (!(this.cid in this.getClient().activeChannels)) {\n\t\t\t\tthis.getClient().activeChannels[this.cid] = this;\n\t\t\t}\n\t\t}\n\n\t\tthis.getClient()._addChannelConfig(state);\n\n\t\t// add any messages to our channel state\n\t\tthis._initializeState(state);\n\n\t\treturn state;\n\t}\n\n\t/**\n\t * banUser - Bans a user from a channel\n\t *\n\t * @param targetUserID\n\t * @param options\n\t * @returns {Promise<*>}\n\t */\n\tasync banUser(targetUserID, options) {\n\t\tthis._checkInitialized();\n\t\treturn await this.getClient().banUser(targetUserID, {\n\t\t\t...options,\n\t\t\ttype: this.type,\n\t\t\tid: this.id,\n\t\t});\n\t}\n\n\t/**\n\t * hides the channel from queryChannels for the user until a message is added\n\t *\n\t * @param userId\n\t * @returns {Promise<*>}\n\t */\n\tasync hide(userId = null) {\n\t\tthis._checkInitialized();\n\t\treturn await this.getClient().post(`${this._channelURL()}/hide`, {\n\t\t\tuser_id: userId,\n\t\t});\n\t}\n\n\t/**\n\t * removes the hidden status for a channel\n\t *\n\t * @param userId\n\t * @returns {Promise<*>}\n\t */\n\tasync show(userId = null) {\n\t\tthis._checkInitialized();\n\t\treturn await this.getClient().post(`${this._channelURL()}/show`, {\n\t\t\tuser_id: userId,\n\t\t});\n\t}\n\n\t/**\n\t * banUser - Removes the bans for a user on a channel\n\t *\n\t * @param targetUserID\n\t * @returns {Promise<*>}\n\t */\n\tasync unbanUser(targetUserID) {\n\t\tthis._checkInitialized();\n\t\treturn await this.getClient().unbanUser(targetUserID, {\n\t\t\ttype: this.type,\n\t\t\tid: this.id,\n\t\t});\n\t}\n\n\t/**\n\t * on - Listen to events on this channel.\n\t *\n\t * channel.on('message.new', event => {console.log(\"my new message\", event, channel.state.messages)})\n\t * or\n\t * channel.on(event => {console.log(event.type)})\n\t *\n\t * @param {string} callbackOrString  The event type to listen for (optional)\n\t * @param {function} callbackOrNothing The callback to call\n\t *\n\t * @return {type} Description\n\t */\n\ton(callbackOrString, callbackOrNothing) {\n\t\tconst key = callbackOrNothing ? callbackOrString : 'all';\n\t\tconst valid = isValidEventType(key);\n\t\tif (!valid) {\n\t\t\tthrow Error(`Invalid event type ${key}`);\n\t\t}\n\t\tconst callback = callbackOrNothing ? callbackOrNothing : callbackOrString;\n\t\tif (!(key in this.listeners)) {\n\t\t\tthis.listeners[key] = [];\n\t\t}\n\t\tthis._client.logger(\n\t\t\t'info',\n\t\t\t`Attaching listener for ${key} event on channel ${this.cid}`,\n\t\t\t{\n\t\t\t\ttags: ['event', 'channel'],\n\t\t\t\tchannel: this,\n\t\t\t},\n\t\t);\n\n\t\tthis.listeners[key].push(callback);\n\t}\n\n\t/**\n\t * off - Remove the event handler\n\t *\n\t */\n\toff(callbackOrString, callbackOrNothing) {\n\t\tthis._checkInitialized();\n\t\tconst key = callbackOrNothing ? callbackOrString : 'all';\n\t\tconst valid = isValidEventType(key);\n\t\tif (!valid) {\n\t\t\tthrow Error(`Invalid event type ${key}`);\n\t\t}\n\t\tconst callback = callbackOrNothing ? callbackOrNothing : callbackOrString;\n\t\tif (!(key in this.listeners)) {\n\t\t\tthis.listeners[key] = [];\n\t\t}\n\n\t\tthis._client.logger(\n\t\t\t'info',\n\t\t\t`Removing listener for ${key} event from channel ${this.cid}`,\n\t\t\t{ tags: ['event', 'channel'], channel: this },\n\t\t);\n\t\tthis.listeners[key] = this.listeners[key].filter(value => value !== callback);\n\t}\n\n\t_handleChannelEvent(event) {\n\t\tconst channel = this;\n\t\tthis._client.logger(\n\t\t\t'info',\n\t\t\t`channel:_handleChannelEvent - Received event of type { ${event.type} } on ${this.cid}`,\n\t\t\t{\n\t\t\t\ttags: ['event', 'channel'],\n\t\t\t\tchannel: this,\n\t\t\t},\n\t\t);\n\n\t\tconst s = channel.state;\n\t\tswitch (event.type) {\n\t\t\tcase 'typing.start':\n\t\t\t\ts.typing = s.typing.set(event.user.id, Immutable(event));\n\t\t\t\tbreak;\n\t\t\tcase 'typing.stop':\n\t\t\t\ts.typing = s.typing.without(event.user.id);\n\t\t\t\tbreak;\n\t\t\tcase 'message.read':\n\t\t\t\ts.read = s.read.set(\n\t\t\t\t\tevent.user.id,\n\t\t\t\t\tImmutable({ user: { ...event.user }, last_read: event.received_at }),\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'user.watching.start':\n\t\t\tcase 'user.updated':\n\t\t\t\ts.watchers = s.watchers.set(event.user.id, Immutable(event.user));\n\t\t\t\tbreak;\n\t\t\tcase 'user.watching.stop':\n\t\t\t\ts.watchers = s.watchers.without(event.user.id);\n\t\t\t\tbreak;\n\t\t\tcase 'message.new':\n\t\t\tcase 'message.updated':\n\t\t\tcase 'message.deleted':\n\t\t\t\ts.addMessageSorted(event.message);\n\t\t\t\tbreak;\n\t\t\tcase 'member.added':\n\t\t\tcase 'member.updated':\n\t\t\t\ts.members = s.members.set(event.member.user_id, Immutable(event.member));\n\t\t\t\tbreak;\n\t\t\tcase 'member.removed':\n\t\t\t\ts.members = s.members.without(event.user.id);\n\t\t\t\tbreak;\n\t\t\tcase 'channel.updated':\n\t\t\t\tchannel.data = Immutable(event.channel);\n\t\t\t\tbreak;\n\t\t\tcase 'reaction.new':\n\t\t\t\ts.addReaction(event.reaction, event.message);\n\t\t\t\tbreak;\n\t\t\tcase 'reaction.deleted':\n\t\t\t\ts.removeReaction(event.reaction, event.message);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\n\t\t// any event can send over the online count\n\t\tif (event.watcher_count !== undefined) {\n\t\t\tchannel.state.watcher_count = event.watcher_count;\n\t\t}\n\t}\n\n\t_callChannelListeners = event => {\n\t\tconst channel = this;\n\t\t// gather and call the listeners\n\t\tconst listeners = [];\n\t\tif (channel.listeners.all) {\n\t\t\tlisteners.push(...channel.listeners.all);\n\t\t}\n\t\tif (channel.listeners[event.type]) {\n\t\t\tlisteners.push(...channel.listeners[event.type]);\n\t\t}\n\n\t\t// call the event and send it to the listeners\n\t\tfor (const listener of listeners) {\n\t\t\tlistener(event);\n\t\t}\n\t};\n\n\t/**\n\t * _channelURL - Returns the channel url\n\t *\n\t * @return {string} The channel url\n\t */\n\t_channelURL = () => {\n\t\tif (!this.id) {\n\t\t\tthrow new Error('channel id is not defined');\n\t\t}\n\t\tconst channelURL = `${this.getClient().baseURL}/channels/${this.type}/${this.id}`;\n\t\treturn channelURL;\n\t};\n\n\t_checkInitialized() {\n\t\tif (!this.initialized && !this.getClient()._isUsingServerAuth()) {\n\t\t\tthrow Error(\n\t\t\t\t`Channel ${this.cid} hasn't been initialized yet. Make sure to call .watch() and wait for it to resolve`,\n\t\t\t);\n\t\t}\n\t}\n\n\t_initializeState(state) {\n\t\t// add the Users\n\t\tif (state.members) {\n\t\t\tfor (const m of state.members) {\n\t\t\t\tthis.getClient().state.updateUserReference(m.user, this.cid);\n\t\t\t}\n\t\t}\n\n\t\tif (state.watchers) {\n\t\t\tfor (const w of state.watchers) {\n\t\t\t\tthis.getClient().state.updateUserReference(w.user, this.cid);\n\t\t\t}\n\t\t}\n\n\t\t// immutable list of maps\n\t\tconst messages = state.messages || [];\n\t\tif (!this.state.messages) {\n\t\t\tthis.state.messages = Immutable([]);\n\t\t}\n\t\tthis.state.addMessagesSorted(messages, true);\n\t\tthis.state.watcher_count = state.watcher_count;\n\t\t// convert the arrays into objects for easier syncing...\n\t\tif (state.watchers) {\n\t\t\tfor (const watcher of state.watchers) {\n\t\t\t\tthis.state.watchers = this.state.watchers.set(watcher.id, watcher);\n\t\t\t}\n\t\t}\n\t\tif (state.read) {\n\t\t\tif (this.getClient().userID != null) {\n\t\t\t\tthis.state.read = this.state.read.set(\n\t\t\t\t\tthis.getClient().user.id,\n\t\t\t\t\tnew Date(0),\n\t\t\t\t);\n\t\t\t}\n\t\t\tfor (const read of state.read) {\n\t\t\t\tconst parsedRead = Object.assign({ ...read });\n\t\t\t\tparsedRead.last_read = new Date(read.last_read);\n\t\t\t\tthis.state.read = this.state.read.set(read.user.id, parsedRead);\n\t\t\t}\n\t\t}\n\t\tif (state.members) {\n\t\t\tfor (const m of state.members) {\n\t\t\t\tthis.state.members = this.state.members.set(m.user.id, m);\n\t\t\t}\n\t\t}\n\t}\n\n\t_disconnect() {\n\t\tthis._client.logger(\n\t\t\t'info',\n\t\t\t`channel:disconnect() - Disconnecting the channel ${this.cid}`,\n\t\t\t{\n\t\t\t\ttags: ['connection', 'channel'],\n\t\t\t\tchannel: this,\n\t\t\t},\n\t\t);\n\n\t\tthis.disconnected = true;\n\t}\n}\n","import Immutable from 'seamless-immutable';\n\n/**\n * ClientState - A container class for the client state.\n */\nexport class ClientState {\n\tconstructor() {\n\t\t// show the status for a certain user...\n\t\t// ie online, offline etc\n\t\tthis.users = Immutable({});\n\t\t// store which channels contain references to the specified user...\n\t\tthis.userChannelReferences = {};\n\t}\n\n\tupdateUsers(users) {\n\t\tfor (const user of users) {\n\t\t\tthis.updateUser(user);\n\t\t}\n\t}\n\n\tupdateUser(user) {\n\t\tif (user != null) {\n\t\t\tthis.users = this.users.set(user.id, Immutable(user));\n\t\t}\n\t}\n\n\tupdateUserReference(user, channelID) {\n\t\tif (user == null) {\n\t\t\treturn;\n\t\t}\n\t\tthis.updateUser(user);\n\t\tif (!this.userChannelReferences[user.id]) {\n\t\t\tthis.userChannelReferences[user.id] = {};\n\t\t}\n\t\tthis.userChannelReferences[user.id][channelID] = true;\n\t}\n}\n","// https://github.com/maxogden/websocket-stream/blob/48dc3ddf943e5ada668c31ccd94e9186f02fafbd/ws-fallback.js\n\nvar ws = null\n\nif (typeof WebSocket !== 'undefined') {\n  ws = WebSocket\n} else if (typeof MozWebSocket !== 'undefined') {\n  ws = MozWebSocket\n} else if (typeof global !== 'undefined') {\n  ws = global.WebSocket || global.MozWebSocket\n} else if (typeof window !== 'undefined') {\n  ws = window.WebSocket || window.MozWebSocket\n} else if (typeof self !== 'undefined') {\n  ws = self.WebSocket || self.MozWebSocket\n}\n\nmodule.exports = ws\n","import isoWS from 'isomorphic-ws';\nimport { sleep } from './utils';\n/**\n * StableWSConnection - A WS connection that reconnects upon failure.\n * - the browser will sometimes report that you're online or offline\n * - the WS connection can break and fail (there is a 30s health check)\n * - sometimes your WS connection will seem to work while the user is in fact offline\n * - to speed up online/offline detection you can use the window.addEventListener('offline');\n *\n * There are 4 ways in which a connection can become unhealthy:\n * - websocket.onerror is called\n * - websocket.onclose is called\n * - the health check fails and no event is received for ~40 seconds\n * - the browser indicates the connection is now offline\n *\n * There are 2 assumptions we make about the server:\n * - state can be recovered by querying the channel again\n * - if the servers fails to publish a message to the client, the WS connection is destroyed\n */\nexport class StableWSConnection {\n\tconstructor({\n\t\twsURL,\n\t\tclientID,\n\t\tuserID,\n\t\tmessageCallback,\n\t\trecoverCallback,\n\n\t\teventCallback,\n\t\tlogger,\n\t}) {\n\t\tthis.wsURL = wsURL;\n\t\tthis.clientID = clientID;\n\t\tthis.userID = userID;\n\t\t/** consecutive failures influence the duration of the timeout */\n\t\tthis.consecutiveFailures = 0;\n\t\t/** keep track of the total number of failures */\n\t\tthis.totalFailures = 0;\n\n\t\t/** We only make 1 attempt to reconnect at the same time.. */\n\t\tthis.isConnecting = false;\n\t\t/** Boolean that indicates if we have a working connection to the server */\n\t\tthis.isHealthy = false;\n\n\t\t/** Callback when the connection fails and recovers */\n\t\tthis.recoverCallback = recoverCallback;\n\t\tthis.messageCallback = messageCallback;\n\t\tthis.eventCallback = eventCallback;\n\n\t\tthis.logger = logger;\n\n\t\t/** Incremented when a new WS connection is made */\n\t\tthis.wsID = 1;\n\n\t\t/** Store the last event time for health checks */\n\t\tthis.lastEvent = null;\n\n\t\t/** Send a health check message every 30 seconds */\n\t\tthis.healthCheckInterval = 30 * 1000;\n\t\t/** Every second we verify that we didn't miss any health checks */\n\t\tthis.monitorInterval = 1 * 1000;\n\n\t\tthis._listenForConnectionChanges();\n\t}\n\n\t/**\n\t * connect - Connect to the WS URL\n\t *\n\t * @return {promise} Promise that completes once the first health check message is received\n\t */\n\tasync connect() {\n\t\tlet healthCheck;\n\t\tif (this.isConnecting) {\n\t\t\tthrow Error(\n\t\t\t\t`You've called connect twice, can only attempt 1 connection at the time`,\n\t\t\t);\n\t\t}\n\t\ttry {\n\t\t\tthis.isConnecting = true;\n\t\t\thealthCheck = await this._connect();\n\t\t\tthis.isConnecting = false;\n\t\t\tthis.consecutiveFailures = 0;\n\t\t\tthis._startMonitor();\n\t\t\tthis._startHealthCheck();\n\t\t\tthis.logger(\n\t\t\t\t'info',\n\t\t\t\t`connection:connect() - Established ws connection with healthcheck: ${healthCheck}`,\n\t\t\t\t{\n\t\t\t\t\ttags: ['connection'],\n\t\t\t\t},\n\t\t\t);\n\t\t\treturn healthCheck;\n\t\t} catch (e) {\n\t\t\tthis.isConnecting = false;\n\t\t\tif (!e.isWSFailure) {\n\t\t\t\t// This is a permanent failure, throw the error...\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * disconnect - Disconnect the connection and doesn't recover...\n\t *\n\t */\n\tdisconnect() {\n\t\tthis.logger(\n\t\t\t'info',\n\t\t\t`connection:disconnect() - Closing the websocket connection for wsID ${this.wsID}`,\n\t\t\t{\n\t\t\t\ttags: ['connection'],\n\t\t\t},\n\t\t);\n\n\t\t// start by removing all the listeners\n\t\tif (this.healthCheckIntervalRef) {\n\t\t\tclearInterval(this.healthCheckIntervalRef);\n\t\t}\n\t\tif (this.monitorIntervalRef) {\n\t\t\tclearInterval(this.monitorIntervalRef);\n\t\t}\n\n\t\tthis._removeConnectionListeners();\n\n\t\t// reset the wsID;\n\t\tthis.wsID = 1;\n\t\tthis.isHealthy = false;\n\n\t\t// remove ws handlers...\n\t\tif (this.ws && this.ws.removeAllListeners) {\n\t\t\tthis.ws.removeAllListeners();\n\t\t}\n\n\t\tlet isClosedPromise;\n\t\t// and finally close...\n\t\tif (this.ws && this.ws.close) {\n\t\t\t// Assigning to local here because we will remove it from this before the\n\t\t\t// promise resolves.\n\t\t\tconst { ws } = this;\n\t\t\tisClosedPromise = new Promise(resolve => {\n\t\t\t\tws.onclose = () => {\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\t\t\t});\n\t\t\tws.close(1000, 'Manually closed connection by calling client.disconnect()');\n\t\t}\n\n\t\tdelete this.ws;\n\n\t\treturn isClosedPromise;\n\t}\n\n\t/**\n\t * _connect - Connect to the WS endpoint\n\t *\n\t * @return {promise} Promise that completes once the first health check message is received\n\t */\n\tasync _connect() {\n\t\tthis._setupConnectionPromise();\n\t\tthis.ws = new isoWS(this.wsURL);\n\t\tthis.ws.onopen = this.onopen.bind(this, this.wsID);\n\t\tthis.ws.onclose = this.onclose.bind(this, this.wsID);\n\t\tthis.ws.onerror = this.onerror.bind(this, this.wsID);\n\t\tthis.ws.onmessage = this.onmessage.bind(this, this.wsID);\n\n\t\tconst response = await this.connectionOpen;\n\t\tthis.connectionID = response.connection_id;\n\n\t\treturn response;\n\t}\n\n\t/**\n\t * _reconnect - Description\n\t *\n\t * @param {int} interval number of ms to wait before connecting\n\t */\n\tasync _reconnect(interval) {\n\t\tthis.logger('info', 'connection:_reconnect() - Initiating the reconnect', {\n\t\t\ttags: ['connection'],\n\t\t});\n\t\t// only allow 1 connection at the time\n\t\tif (this.isConnecting || this.isHealthy) {\n\t\t\tthis.logger(\n\t\t\t\t'info',\n\t\t\t\t'connection:_reconnect() - Abort (1) since already connecting or healthy',\n\t\t\t\t{\n\t\t\t\t\ttags: ['connection'],\n\t\t\t\t},\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// reconnect in case of on error or on close\n\t\t// also reconnect if the health check cycle fails\n\t\tif (interval === undefined) {\n\t\t\tinterval = this._retryInterval();\n\t\t}\n\n\t\t// reconnect, or try again after a little while...\n\t\tawait sleep(interval);\n\n\t\t// Check once again if by some other call to _reconnect is active or connection is\n\t\t// already restored, then no need to proceed.\n\t\tif (this.isConnecting || this.isHealthy) {\n\t\t\tthis.logger(\n\t\t\t\t'info',\n\t\t\t\t'connection:_reconnect() - Abort (2) since already connecting or healthy',\n\t\t\t\t{\n\t\t\t\t\ttags: ['connection'],\n\t\t\t\t},\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isConnecting = true;\n\n\t\t// cleanup the old connection\n\t\tthis.logger(\n\t\t\t'info',\n\t\t\t'connection:_reconnect() : Destroying current WS connection',\n\t\t\t{\n\t\t\t\ttags: ['connection'],\n\t\t\t},\n\t\t);\n\t\tthis._destroyCurrentWSConnection();\n\n\t\ttry {\n\t\t\tconst open = await this._connect();\n\t\t\tif (this.recoverCallback) {\n\t\t\t\tthis.logger(\n\t\t\t\t\t'info',\n\t\t\t\t\t'connection:_reconnect() : Waiting for recoverCallBack',\n\t\t\t\t\t{\n\t\t\t\t\t\ttags: ['connection'],\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t\tawait this.recoverCallback(open);\n\t\t\t\tthis.logger(\n\t\t\t\t\t'info',\n\t\t\t\t\t'connection:_reconnect() : Finished recoverCallBack',\n\t\t\t\t\t{\n\t\t\t\t\t\ttags: ['connection'],\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.isConnecting = false;\n\t\t\tthis.consecutiveFailures = 0;\n\t\t} catch (e) {\n\t\t\tthis.isConnecting = false;\n\t\t\t// reconnect on WS failures, dont reconnect if there is a code bug\n\t\t\tif (e.isWSFailure) {\n\t\t\t\tthis.logger(\n\t\t\t\t\t'info',\n\t\t\t\t\t'connection:_reconnect() : WS failure, so going to try to reconnect',\n\t\t\t\t\t{\n\t\t\t\t\t\ttags: ['connection'],\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t\tthis._reconnect();\n\t\t\t}\n\t\t}\n\t\tthis.logger('info', 'connection:_reconnect() : == END ==', {\n\t\t\ttags: ['connection'],\n\t\t});\n\t}\n\n\t/**\n\t * onlineStatusChanged - this function is called when the browser connects or disconnects from the internet.\n\t *\n\t * @param {object} event Event with type online or offline\n\t *\n\t */\n\tonlineStatusChanged = event => {\n\t\tif (event.type === 'offline') {\n\t\t\t// mark the connection as down\n\t\t\tthis.logger(\n\t\t\t\t'info',\n\t\t\t\t'connection:onlineStatusChanged() : Status changing to offline',\n\t\t\t\t{\n\t\t\t\t\ttags: ['connection'],\n\t\t\t\t},\n\t\t\t);\n\t\t\tthis._setHealth(false);\n\t\t} else if (event.type === 'online') {\n\t\t\t// retry right now...\n\t\t\t// We check this.isHealthy, not sure if it's always\n\t\t\t// smart to create a new WS connection if the old one is still up and running.\n\t\t\t// it's possible we didnt miss any messages, so this process is just expensive and not needed.\n\t\t\tthis.logger(\n\t\t\t\t'info',\n\t\t\t\t`connection:onlineStatusChanged() : Status changing to online. isHealthy: ${this.isHealthy}`,\n\t\t\t\t{\n\t\t\t\t\ttags: ['connection'],\n\t\t\t\t},\n\t\t\t);\n\t\t\tif (!this.isHealthy) {\n\t\t\t\tthis._reconnect(10);\n\t\t\t}\n\t\t}\n\t};\n\n\tonopen = wsID => {\n\t\tif (this.wsID !== wsID) return;\n\n\t\t// set healthy..\n\t\tthis._setHealth(true);\n\t};\n\n\tonmessage = (wsID, event) => {\n\t\tif (this.wsID !== wsID) return;\n\n\t\t// we wait till the first message before we consider the connection open..\n\t\t// the reason for this is that auth errors and similar errors trigger a ws.onopen and immediately\n\t\t// after that a ws.onclose..\n\t\tif (!this.isResolved) {\n\t\t\tthis.resolvePromise(event);\n\t\t}\n\n\t\t// trigger the event..\n\t\tthis.lastEvent = new Date();\n\t\tthis.messageCallback(event);\n\t};\n\n\tonclose = (wsID, event) => {\n\t\tif (this.wsID !== wsID) return;\n\n\t\tif (event.code === 1000) {\n\t\t\t// this is a permanent error raised by stream..\n\t\t\t// usually caused by invalid auth details\n\t\t\tconst error = new Error(`WS connection reject with error ${event.reason}`);\n\t\t\terror.reason = event.reason;\n\t\t\tthis.rejectPromise(error);\n\t\t} else {\n\t\t\tthis.consecutiveFailures += 1;\n\t\t\tthis.totalFailures += 1;\n\t\t\tthis._setHealth(false);\n\n\t\t\tthis.rejectPromise(this._errorFromWSEvent(event));\n\n\t\t\t// reconnect if its an abnormal failure\n\t\t\tthis._reconnect();\n\t\t}\n\t};\n\n\tonerror = (wsID, event) => {\n\t\tif (this.wsID !== wsID) return;\n\n\t\tthis.consecutiveFailures += 1;\n\t\tthis.totalFailures += 1;\n\t\tthis._setHealth(false);\n\n\t\tthis.rejectPromise(this._errorFromWSEvent(event));\n\n\t\tthis._reconnect();\n\t};\n\n\t/**\n\t * _setHealth - Sets the connection to healthy or unhealthy.\n\t * Broadcasts an event in case the connection status changed.\n\t *\n\t * @param {bool} healthy boolean indicating if the connection is healthy or not\n\t *\n\t */\n\t_setHealth = healthy => {\n\t\tif (healthy && !this.isHealthy) {\n\t\t\t// yee we are online:\n\t\t\tthis.isHealthy = true;\n\t\t\tthis.eventCallback({\n\t\t\t\ttype: 'connection.changed',\n\t\t\t\tonline: true,\n\t\t\t});\n\t\t}\n\n\t\tif (!healthy && this.isHealthy) {\n\t\t\t// bummer we are offline\n\t\t\tthis.isHealthy = false;\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!this.isHealthy) {\n\t\t\t\t\tthis.eventCallback({\n\t\t\t\t\t\ttype: 'connection.changed',\n\t\t\t\t\t\tonline: false,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, 5000);\n\t\t}\n\t};\n\n\t/**\n\t * _errorFromWSEvent - Creates an error object for the WS event\n\t *\n\t */\n\t_errorFromWSEvent = event => {\n\t\tconst error = new Error(`WS failed with code ${event.code}`);\n\t\terror.code = event.code;\n\t\terror.isWSFailure = true;\n\t\treturn error;\n\t};\n\n\t/**\n\t * _listenForConnectionChanges - Adds an event listener for the browser going online or offline\n\t *\n\t */\n\t_listenForConnectionChanges = () => {\n\t\tif (\n\t\t\ttypeof window !== 'undefined' &&\n\t\t\twindow != null &&\n\t\t\twindow.addEventListener != null\n\t\t) {\n\t\t\twindow.addEventListener('offline', this.onlineStatusChanged);\n\t\t\twindow.addEventListener('online', this.onlineStatusChanged);\n\t\t}\n\t};\n\n\t_removeConnectionListeners = () => {\n\t\tif (\n\t\t\ttypeof window !== 'undefined' &&\n\t\t\twindow != null &&\n\t\t\twindow.addEventListener != null\n\t\t) {\n\t\t\twindow.removeEventListener('offline', this.onlineStatusChanged);\n\t\t\twindow.removeEventListener('online', this.onlineStatusChanged);\n\t\t}\n\t};\n\n\t/**\n\t * _destroyCurrentWSConnection - Removes the current WS connnection\n\t *\n\t */\n\t_destroyCurrentWSConnection() {\n\t\t// increment the ID, meaning we will ignore all messages from the old\n\t\t// ws connection from now on.\n\t\tthis.wsID += 1;\n\n\t\ttry {\n\t\t\tif (this.ws && this.ws.removeAllListeners) {\n\t\t\t\tthis.ws.removeAllListeners();\n\t\t\t}\n\n\t\t\tif (this.ws && this.ws.close) {\n\t\t\t\tthis.ws.close();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// we dont care\n\t\t}\n\t}\n\n\t/**\n\t * _retryInterval - A retry interval which increases after consecutive failures\n\t *\n\t * @return {int} Duration to wait in milliseconds\n\t */\n\t_retryInterval() {\n\t\t// try to reconnect in 0-5 seconds (random to spread out the load from failures)\n\t\tconst max = Math.min(500 + this.consecutiveFailures * 2000, 25000);\n\t\tconst min = Math.min(Math.max(250, (this.consecutiveFailures - 1) * 2000), 25000);\n\t\treturn Math.floor(Math.random() * (max - min) + min);\n\t}\n\n\t/**\n\t * _setupPromise - sets up the this.connectOpen promise\n\t */\n\t_setupConnectionPromise = () => {\n\t\tconst that = this;\n\t\tthis.isResolved = false;\n\t\t/** a promise that is resolved once ws.open is called */\n\t\tthis.connectionOpen = new Promise(function(resolve, reject) {\n\t\t\tthat.resolvePromise = resolve;\n\t\t\tthat.rejectPromise = reject;\n\t\t}).then(e => {\n\t\t\tconst data = JSON.parse(e.data);\n\t\t\tif (data.error != null) {\n\t\t\t\tthrow new Error(JSON.stringify(data.error));\n\t\t\t}\n\t\t\treturn data;\n\t\t});\n\t};\n\n\t/**\n\t * _startHealthCheck - Sends a message every 30s or so to see if the ws connection still works\n\t *\n\t */\n\t_startHealthCheck() {\n\t\tconst that = this;\n\t\t// 30 seconds is the recommended interval (messenger uses this)\n\t\tthis.healthCheckIntervalRef = setInterval(() => {\n\t\t\t// send the healthcheck.., server replies with a health check event\n\t\t\tconst data = [\n\t\t\t\t{\n\t\t\t\t\ttype: 'health.check',\n\t\t\t\t\tclient_id: that.clientID,\n\t\t\t\t\tuser_id: that.userID,\n\t\t\t\t},\n\t\t\t];\n\t\t\t// try to send on the connection\n\t\t\ttry {\n\t\t\t\tthat.ws.send(JSON.stringify(data));\n\t\t\t} catch (e) {\n\t\t\t\t// error will already be detected elsewhere\n\t\t\t}\n\t\t}, that.healthCheckInterval);\n\t}\n\n\t/**\n\t * _startMonitor - Verifies we didn't miss any events. Marks the connection as failed in case we did.\n\t *\n\t */\n\t_startMonitor() {\n\t\tconst that = this;\n\t\tthis.monitorIntervalRef = setInterval(() => {\n\t\t\tconst now = new Date();\n\t\t\t// means we missed a health check\n\t\t\tif (now - that.lastEvent > this.healthCheckInterval + 10 * 1000) {\n\t\t\t\tthis.logger('info', 'connection:_startMonitor - going to reconnect', {\n\t\t\t\t\ttags: ['connection'],\n\t\t\t\t});\n\t\t\t\tthat._setHealth(false);\n\t\t\t\tthat._reconnect();\n\t\t\t}\n\t\t}, that.monitorInterval);\n\t}\n}\n","export default null;","export default null;","import jwt from 'jsonwebtoken';\nimport crypto from 'crypto';\n\n/**\n * Creates the JWT token that can be used for a UserSession\n * @method JWTUserSessionToken\n * @memberof signing\n * @private\n * @param {string} apiSecret - API Secret key\n * @param {string} userId - The user_id key in the JWT payload\n * @param {object} [extraData] - Extra that should be part of the JWT token\n * @param {object} [jwtOptions] - Options that can be past to jwt.sign\n * @return {string} JWT Token\n */\nexport function JWTUserToken(apiSecret, userId, extraData = {}, jwtOptions = {}) {\n\tif (typeof userId !== 'string') {\n\t\tthrow new TypeError('userId should be a string');\n\t}\n\n\tconst payload = {\n\t\tuser_id: userId,\n\t\t...extraData,\n\t};\n\n\tconst opts = Object.assign({ algorithm: 'HS256', noTimestamp: true }, jwtOptions);\n\treturn jwt.sign(payload, apiSecret, opts);\n}\n\nexport function JWTServerToken(apiSecret, jwtOptions = {}) {\n\tconst payload = {\n\t\tserver: true,\n\t};\n\n\tconst opts = Object.assign({ algorithm: 'HS256', noTimestamp: true }, jwtOptions);\n\treturn jwt.sign(payload, apiSecret, opts);\n}\n\nfunction decodeBase64(s) {\n\tconst e = {},\n\t\tw = String.fromCharCode,\n\t\tL = s.length;\n\tlet i,\n\t\tb = 0,\n\t\tc,\n\t\tx,\n\t\tl = 0,\n\t\ta,\n\t\tr = '';\n\tconst A = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\tfor (i = 0; i < 64; i++) {\n\t\te[A.charAt(i)] = i;\n\t}\n\tfor (x = 0; x < L; x++) {\n\t\tc = e[s.charAt(x)];\n\t\tb = (b << 6) + c;\n\t\tl += 6;\n\t\twhile (l >= 8) {\n\t\t\t((a = (b >>> (l -= 8)) & 0xff) || x < L - 2) && (r += w(a));\n\t\t}\n\t}\n\treturn r;\n}\n\n/**\n * @return {string}\n */\nexport function UserFromToken(token) {\n\tconst fragments = token.split('.');\n\tif (fragments.length !== 3) {\n\t\treturn '';\n\t}\n\tconst b64Payload = fragments[1];\n\tconst payload = decodeBase64(b64Payload);\n\tconst data = JSON.parse(payload);\n\treturn data.user_id;\n}\n\nfunction encodeBase64(s) {\n\tif (typeof window !== 'undefined' && window.btoa) {\n\t\treturn window.btoa(s);\n\t} else {\n\t\treturn Buffer.from(s.toString(), 'binary').toString('base64');\n\t}\n}\n\n/**\n *\n * @param userId {string} the id of the user\n * @return {string}\n */\nexport function DevToken(userId) {\n\treturn [\n\t\t'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9', //{\"alg\": \"HS256\", \"typ\": \"JWT\"}\n\t\tencodeBase64(JSON.stringify({ user_id: userId })),\n\t\t'devtoken', // hardcoded signature\n\t].join('.');\n}\n\n/**\n *\n * @param body {string} the signed message\n * @param secret {string} the shared secret used to generate the signature (Stream API secret)\n * @param signature {string} the signature to validate\n * @return {boolean}\n */\nexport function CheckSignature(body, secret, signature) {\n\tconst key = Buffer.from(secret, 'ascii');\n\tconst hash = crypto\n\t\t.createHmac('sha256', key)\n\t\t.update(body)\n\t\t.digest('hex');\n\treturn hash === signature;\n}\n","export default null;","export default null;","var __self__ = (function (root) {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = root.DOMException\n}\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n","/* eslint-env browser */\nmodule.exports = typeof self == 'object' ? self.FormData : window.FormData;\n","/* eslint no-unused-vars: \"off\" */\n/* global process */\n\nimport axios from 'axios';\nimport uuidv4 from 'uuid/v4';\nimport { Channel } from './channel';\nimport { ClientState } from './client_state';\nimport { StableWSConnection } from './connection';\n\nimport { isValidEventType } from './events';\n\nimport {\n\tJWTServerToken,\n\tJWTUserToken,\n\tUserFromToken,\n\tDevToken,\n\tCheckSignature,\n} from './signing';\nimport http from 'http';\nimport https from 'https';\nimport fetch, { Headers } from 'cross-fetch';\nimport FormData from 'form-data';\nimport pkg from '../package.json';\n\nfunction isReadableStream(obj) {\n\treturn (\n\t\tobj !== null &&\n\t\ttypeof obj === 'object' &&\n\t\ttypeof obj._read === 'function' &&\n\t\ttypeof obj._readableState === 'object'\n\t);\n}\n\nfunction isFunction(value) {\n\treturn (\n\t\tvalue &&\n\t\t(Object.prototype.toString.call(value) === '[object Function]' ||\n\t\t\t'function' === typeof value ||\n\t\t\tvalue instanceof Function)\n\t);\n}\n\nexport class StreamChat {\n\tconstructor(key, secretOrOptions, options) {\n\t\t// set the key\n\t\tthis.key = key;\n\t\tthis.userToken = null;\n\t\tthis.secret = null;\n\t\tthis.listeners = {};\n\t\tthis.state = new ClientState();\n\n\t\t// set the secret\n\t\tif (secretOrOptions && secretOrOptions.indexOf) {\n\t\t\tthis.secret = secretOrOptions;\n\t\t}\n\n\t\t// set the options... and figure out defaults...\n\t\toptions = options || secretOrOptions;\n\t\tif (!options) {\n\t\t\toptions = {};\n\t\t}\n\n\t\tthis.browser =\n\t\t\ttypeof options.browser !== 'undefined'\n\t\t\t\t? options.browser\n\t\t\t\t: typeof window !== 'undefined';\n\t\tthis.node = !this.browser;\n\n\t\tconst defaultOptions = {\n\t\t\ttimeout: 3000,\n\t\t};\n\n\t\tif (this.node) {\n\t\t\tconst nodeOptions = {\n\t\t\t\thttpAgent: new http.Agent({ keepAlive: 3000 }),\n\t\t\t\thttpsAgent: new https.Agent({ keepAlive: 3000 }),\n\t\t\t};\n\t\t\tthis.options = { ...nodeOptions, ...defaultOptions, ...options };\n\t\t} else {\n\t\t\tthis.options = { ...defaultOptions, ...options };\n\t\t\tdelete this.options.httpAgent;\n\t\t\tdelete this.options.httpsAgent;\n\t\t}\n\n\t\tthis.setBaseURL('https://chat-us-east-1.stream-io-api.com');\n\n\t\tif (typeof process !== 'undefined' && process.env.STREAM_LOCAL_TEST_RUN) {\n\t\t\tthis.setBaseURL('http://localhost:3030');\n\t\t}\n\n\t\t// WS connection is initialized when setUser is called\n\t\tthis.wsConnection = null;\n\t\tthis.wsPromise = null;\n\t\t// keeps a reference to all the channels that are in use\n\t\tthis.activeChannels = {};\n\t\t// mapping between channel groups and configs\n\t\tthis.configs = {};\n\t\tthis.anonymous = false;\n\n\t\t/**\n\t\t * logger function should accept 3 parameters:\n\t\t * @param logLevel string\n\t\t * @param message   string\n\t\t * @param extraData object\n\t\t *\n\t\t * e.g.,\n\t\t * const client = new StreamChat('api_key', {}, {\n\t\t * \t\tlogger = (logLevel, message, extraData) => {\n\t\t * \t\t\tconsole.log(message);\n\t\t * \t\t}\n\t\t * })\n\t\t *\n\t\t * extraData contains tags array attached to log message. Tags can have one/many of following values:\n\t\t * 1. api\n\t\t * 2. api_request\n\t\t * 3. api_response\n\t\t * 4. client\n\t\t * 5. channel\n\t\t * 6. connection\n\t\t * 7. event\n\t\t *\n\t\t * It may also contains some extra data, some examples have been mentioned below:\n\t\t * 1. {\n\t\t * \t\ttags: ['api', 'api_request', 'client'],\n\t\t * \t\turl: string,\n\t\t * \t\tpayload: object,\n\t\t * \t\tconfig: object\n\t\t * }\n\t\t * 2. {\n\t\t * \t\ttags: ['api', 'api_response', 'client'],\n\t\t * \t\turl: string,\n\t\t * \t\tresponse: object\n\t\t * }\n\t\t * 3. {\n\t\t * \t\ttags: ['api', 'api_response', 'client'],\n\t\t * \t\turl: string,\n\t\t * \t\terror: object\n\t\t * }\n\t\t * 4. {\n\t\t * \t\ttags: ['event', 'client'],\n\t\t * \t\tevent: object\n\t\t * }\n\t\t * 5. {\n\t\t * \t\ttags: ['channel'],\n\t\t * \t\tchannel: object\n\t\t * }\n\t\t */\n\t\tthis.logger = isFunction(options.logger) ? options.logger : () => {};\n\t}\n\n\tdevToken(userID) {\n\t\treturn DevToken(userID);\n\t}\n\n\tgetAuthType() {\n\t\treturn this.anonymous ? 'anonymous' : 'jwt';\n\t}\n\n\tsetBaseURL(baseURL) {\n\t\tthis.baseURL = baseURL;\n\t\tthis.wsBaseURL = this.baseURL.replace('http', 'ws');\n\t}\n\n\t_setupConnection() {\n\t\tthis.UUID = uuidv4();\n\t\tthis.clientID = `${this.userID}--${this.UUID}`;\n\t\tthis.wsPromise = this.connect();\n\t\tthis._startCleaning();\n\t\treturn this.wsPromise;\n\t}\n\n\t_hasConnectionID = () => Boolean(this.connectionID);\n\n\t/**\n\t * setUser - Set the current user, this triggers a connection to the API\n\t *\n\t * @param {object} user Data about this user. IE {name: \"john\"}\n\t * @param {string} userToken   Token\n\t *\n\t * @return {promise} Returns a promise that resolves when the connection is setup\n\t */\n\tsetUser(user, userToken) {\n\t\tif (this.userID) {\n\t\t\tthrow new Error(\n\t\t\t\t'Use client.disconnect() before trying to connect as a different user. setUser was called twice.',\n\t\t\t);\n\t\t}\n\t\t// we generate the client id client side\n\t\tthis.userID = user.id;\n\n\t\tif (!this.userID) {\n\t\t\tthrow new Error('The \"id\" field on the user is missing');\n\t\t}\n\n\t\tthis.userToken = userToken;\n\n\t\tif (userToken == null && this.secret != null) {\n\t\t\tthis.userToken = this.createToken(this.userID);\n\t\t}\n\n\t\tif (this.userToken == null) {\n\t\t\tthrow new Error('both userToken and api secret are not provided');\n\t\t}\n\n\t\tconst tokenUserId = UserFromToken(this.userToken);\n\t\tif (\n\t\t\tuserToken != null &&\n\t\t\t(tokenUserId == null || tokenUserId === '' || tokenUserId !== user.id)\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t'userToken does not have a user_id or is not matching with user.id',\n\t\t\t);\n\t\t}\n\t\tthis._setUser(user);\n\t\tthis.anonymous = false;\n\n\t\treturn this._setupConnection();\n\t}\n\n\t_setUser(user) {\n\t\t// this one is used by the frontend\n\t\tthis.user = user;\n\t\t// this one is actually used for requests...\n\t\tthis._user = { ...user };\n\t}\n\n\t/**\n\t * updateAppSettings - updates application settings\n\t *\n\t * @param {object} options App settings.\n\t * \t\tIE: {\n\t  \t\t\t\"apn_config\": {\n\t\t\t\t\t\"auth_type\": \"token\",\n\t\t\t\t\t\"auth_key\": fs.readFileSync(\n\t\t\t\t\t\t'./apn-push-auth-key.p8',\n\t\t\t\t\t\t'utf-8',\n\t\t\t\t\t),\n\t\t\t\t\t\"key_id\": \"keyid\",\n\t\t\t\t\t\"team_id\": \"teamid\", //either ALL these 3\n\t\t\t\t\t\"notification_template\": \"notification handlebars template\",\n\t\t\t\t\t\"bundle_id\": \"com.apple.your.app\",\n\t\t\t\t\t\"development\": true\n\t\t\t\t},\n\t\t\t\t\"firebase_config\": {\n\t\t\t\t\t\"server_key\": \"server key from fcm\",\n\t\t\t\t\t\"notification_template\": \"notification handlebars template\"\n\t\t\t\t},\n\t\t\t\t\"webhook_url\": \"https://acme.com/my/awesome/webhook/\"\n\t\t\t}\n\t */\n\tasync updateAppSettings(options) {\n\t\tif (options.apn_config && options.apn_config.p12_cert) {\n\t\t\toptions.apn_config.p12_cert = Buffer.from(\n\t\t\t\toptions.apn_config.p12_cert,\n\t\t\t).toString('base64');\n\t\t}\n\t\treturn await this.patch(this.baseURL + '/app', options);\n\t}\n\n\t/**\n\t * getAppSettings - retrieves application settings\n\t */\n\tasync getAppSettings() {\n\t\treturn await this.get(this.baseURL + '/app');\n\t}\n\n\t/**\n\t * testPushSettings - Tests the push settings for a user with a random chat message and the configured push templates\n\t *\n\t * @param {string} userID User ID. If user has no devices, it will error\n\t * @param {object} [data] Overrides for push templates/message used\n\t * \t\tIE: {\n\t\t\t\t  messageID: 'id-of-message',//will error if message does not exist\n\t\t\t\t  apnTemplate: '{}', //if app doesn't have apn configured it will error\n\t\t\t\t  firebaseTemplate: '{}', //if app doesn't have firebase configured it will error\n\t\t\t}\n\t */\n\tasync testPushSettings(userID, data = {}) {\n\t\treturn await this.post(this.baseURL + '/check_push', {\n\t\t\tuser_id: userID,\n\t\t\t...(data.messageID ? { message_id: data.messageID } : {}),\n\t\t\t...(data.apnTemplate ? { apn_template: data.apnTemplate } : {}),\n\t\t\t...(data.firebaseTemplate\n\t\t\t\t? { firebase_template: data.firebaseTemplate }\n\t\t\t\t: {}),\n\t\t});\n\t}\n\n\t/**\n\t * disconnect - closes the WS connection\n\t */\n\tdisconnect() {\n\t\tthis.logger('info', 'client:disconnect() - Disconnecting the client', {\n\t\t\ttags: ['connection', 'client'],\n\t\t});\n\t\t// remove the user specific fields\n\t\tdelete this.user;\n\t\tdelete this._user;\n\t\tdelete this.userID;\n\n\t\tif (this.cleaningIntervalRef != null) {\n\t\t\tclearInterval(this.cleaningIntervalRef);\n\t\t\tthis.cleaningIntervalRef = null;\n\t\t}\n\n\t\tthis.anonymous = false;\n\t\tthis.userToken = null;\n\n\t\tthis.connectionEstablishedCount = 0;\n\n\t\tfor (const channel of Object.values(this.activeChannels)) {\n\t\t\tchannel._disconnect();\n\t\t}\n\t\t// ensure we no longer return inactive channels\n\t\tthis.activeChannels = {};\n\t\t// reset client state\n\t\tthis.state = new ClientState();\n\n\t\t// close the WS connection\n\t\tif (this.wsConnection) {\n\t\t\treturn this.wsConnection.disconnect();\n\t\t}\n\t}\n\n\tsetAnonymousUser() {\n\t\tthis.anonymous = true;\n\t\tthis.userID = uuidv4();\n\t\tthis._setUser({\n\t\t\tid: this.userID,\n\t\t\tanon: true,\n\t\t});\n\t\treturn this._setupConnection();\n\t}\n\n\t/**\n\t * setGuestUser - Setup a temporary guest user\n\t *\n\t * @param {object} user Data about this user. IE {name: \"john\"}\n\t *\n\t * @return {promise} Returns a promise that resolves when the connection is setup\n\t */\n\tasync setGuestUser(user) {\n\t\tlet response;\n\t\tthis.anonymous = true;\n\t\ttry {\n\t\t\tresponse = await this.post(this.baseURL + '/guest', { user });\n\t\t} catch (e) {\n\t\t\tthis.anonymous = false;\n\t\t\tthrow e;\n\t\t}\n\t\tthis.anonymous = false;\n\t\tconst {\n\t\t\tcreated_at,\n\t\t\tupdated_at,\n\t\t\tlast_active,\n\t\t\tonline,\n\t\t\t...guestUser\n\t\t} = response.user;\n\t\treturn await this.setUser(guestUser, response.access_token);\n\t}\n\n\t/**\n\t * createToken - Creates a token to authenticate this user. This function is used server side.\n\t * The resulting token should be passed to the client side when the users registers or logs in\n\t *\n\t * @param {string}   userID         The User ID\n\t * @param {string}   exp            The expiration time for the token expressed in the number of seconds since the epoch\n\t *\n\t * @return {string} Returns a token\n\t */\n\tcreateToken(userID, exp) {\n\t\tconst extra = {};\n\t\tif (exp != null) {\n\t\t\textra.exp = exp;\n\t\t}\n\t\treturn JWTUserToken(this.secret, userID, extra, {});\n\t}\n\n\t/**\n\t * on - Listen to events on all channels and users your watching\n\t *\n\t * client.on('message.new', event => {console.log(\"my new message\", event, channel.state.messages)})\n\t * or\n\t * client.on(event => {console.log(event.type)})\n\t *\n\t * @param {string} callbackOrString  The event type to listen for (optional)\n\t * @param {function} callbackOrNothing The callback to call\n\t *\n\t * @return {type} Description\n\t */\n\ton(callbackOrString, callbackOrNothing) {\n\t\tconst key = callbackOrNothing ? callbackOrString : 'all';\n\t\tconst valid = isValidEventType(key);\n\t\tif (!valid) {\n\t\t\tthrow Error(`Invalid event type ${key}`);\n\t\t}\n\t\tconst callback = callbackOrNothing ? callbackOrNothing : callbackOrString;\n\t\tif (!(key in this.listeners)) {\n\t\t\tthis.listeners[key] = [];\n\t\t}\n\t\tthis.logger('info', `Attaching listener for ${key} event`, {\n\t\t\ttags: ['event', 'client'],\n\t\t});\n\t\tthis.listeners[key].push(callback);\n\t\treturn {\n\t\t\tunsubscribe: () => {\n\t\t\t\tthis.listeners[key] = this.listeners[key].filter(el => el !== callback);\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n\t * off - Remove the event handler\n\t *\n\t */\n\toff(callbackOrString, callbackOrNothing) {\n\t\tconst key = callbackOrNothing ? callbackOrString : 'all';\n\t\tconst valid = isValidEventType(key);\n\t\tif (!valid) {\n\t\t\tthrow Error(`Invalid event type ${key}`);\n\t\t}\n\t\tconst callback = callbackOrNothing ? callbackOrNothing : callbackOrString;\n\t\tif (!(key in this.listeners)) {\n\t\t\tthis.listeners[key] = [];\n\t\t}\n\n\t\tthis.logger('info', `Removing listener for ${key} event`, {\n\t\t\ttags: ['event', 'client'],\n\t\t});\n\t\tthis.listeners[key] = this.listeners[key].filter(value => value !== callback);\n\t}\n\n\t_logApiRequest(type, url, data, config) {\n\t\tthis.logger('info', `client: ${type} - Request - ${url}`, {\n\t\t\ttags: ['api', 'api_request', 'client'],\n\t\t\turl,\n\t\t\tpayload: data,\n\t\t\tconfig,\n\t\t});\n\t}\n\n\t_logApiResponse(type, url, response) {\n\t\tthis.logger(\n\t\t\t'info',\n\t\t\t`client:${type} - Response - url: ${url} > status ${response.status}`,\n\t\t\t{\n\t\t\t\ttags: ['api', 'api_response', 'client'],\n\t\t\t\turl,\n\t\t\t\tresponse,\n\t\t\t},\n\t\t);\n\t}\n\n\t_logApiError(type, url, error) {\n\t\tthis.logger('error', `client:${type} - Error - url: ${url}`, {\n\t\t\ttags: ['api', 'api_response', 'client'],\n\t\t\turl,\n\t\t\terror,\n\t\t});\n\t}\n\n\tasync get(url, params) {\n\t\ttry {\n\t\t\tthis._logApiRequest('get', url, {}, this._addClientParams(params));\n\t\t\tconst response = await axios.get(url, this._addClientParams(params));\n\t\t\tthis._logApiResponse('get', url, response);\n\n\t\t\treturn this.handleResponse(response);\n\t\t} catch (e) {\n\t\t\tthis._logApiError('get', url, e);\n\t\t\tif (e.response) {\n\t\t\t\treturn this.handleResponse(e.response);\n\t\t\t} else {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync put(url, data) {\n\t\tlet response;\n\t\ttry {\n\t\t\tthis._logApiRequest('put', url, data, this._addClientParams());\n\t\t\tresponse = await axios.put(url, data, this._addClientParams());\n\t\t\tthis._logApiResponse('put', url, response);\n\n\t\t\treturn this.handleResponse(response);\n\t\t} catch (e) {\n\t\t\tthis._logApiError('get', url, e);\n\t\t\tif (e.response) {\n\t\t\t\treturn this.handleResponse(e.response);\n\t\t\t} else {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync post(url, data) {\n\t\tlet response;\n\t\ttry {\n\t\t\tthis._logApiRequest('post', url, data, this._addClientParams());\n\t\t\tresponse = await axios.post(url, data, this._addClientParams());\n\t\t\tthis._logApiResponse('post', url, response);\n\n\t\t\treturn this.handleResponse(response);\n\t\t} catch (e) {\n\t\t\tthis._logApiError('post', url, e);\n\t\t\tif (e.response) {\n\t\t\t\treturn this.handleResponse(e.response);\n\t\t\t} else {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync patch(url, data) {\n\t\tlet response;\n\t\ttry {\n\t\t\tthis._logApiRequest('patch', url, data, this._addClientParams());\n\t\t\tresponse = await axios.patch(url, data, this._addClientParams());\n\t\t\tthis._logApiResponse('patch', url, response);\n\n\t\t\treturn this.handleResponse(response);\n\t\t} catch (e) {\n\t\t\tthis._logApiError('patch', url, e);\n\t\t\tif (e.response) {\n\t\t\t\treturn this.handleResponse(e.response);\n\t\t\t} else {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync delete(url, params) {\n\t\tlet response;\n\t\ttry {\n\t\t\tthis._logApiRequest('delete', url, {}, this._addClientParams());\n\t\t\tresponse = await axios.delete(url, this._addClientParams(params));\n\t\t\tthis._logApiResponse('delete', url, response);\n\n\t\t\treturn this.handleResponse(response);\n\t\t} catch (e) {\n\t\t\tthis._logApiError('delete', url, e);\n\t\t\tif (e.response) {\n\t\t\t\treturn this.handleResponse(e.response);\n\t\t\t} else {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync sendFile(url, uri, name, contentType, user) {\n\t\tconst data = new FormData();\n\t\tlet fileField;\n\n\t\tconst params = this._addClientParams();\n\t\tif (isReadableStream(uri) || uri instanceof File) {\n\t\t\tfileField = uri;\n\t\t} else {\n\t\t\tfileField = {\n\t\t\t\turi,\n\t\t\t\tname: name || uri.split('/').reverse()[0],\n\t\t\t};\n\t\t\tif (contentType != null) {\n\t\t\t\tfileField.type = contentType;\n\t\t\t}\n\t\t}\n\n\t\tif (user != null) {\n\t\t\tdata.append('user', JSON.stringify(user));\n\t\t}\n\t\tdata.append('file', fileField);\n\t\tconst response = await fetch(`${url}?api_key=${this.key}`, {\n\t\t\tmethod: 'post',\n\t\t\tbody: data,\n\t\t\theaders: new Headers({\n\t\t\t\tAuthorization: params.headers.Authorization,\n\t\t\t\t'stream-auth-type': this.getAuthType(),\n\t\t\t}),\n\t\t});\n\t\tresponse.data = await response.json();\n\t\treturn this.handleResponse(response);\n\t}\n\n\terrorFromResponse(response) {\n\t\tlet err;\n\t\terr = new Error(`StreamChat error HTTP code: ${response.status}`);\n\t\tif (response.data && response.data.code) {\n\t\t\terr = new Error(\n\t\t\t\t`StreamChat error code ${response.data.code}: ${response.data.message}`,\n\t\t\t);\n\t\t\terr.code = response.data.code;\n\t\t}\n\t\terr.response = response;\n\t\terr.status = response.status;\n\t\treturn err;\n\t}\n\n\thandleResponse(response) {\n\t\tconst data = response.data;\n\t\tif ((response.status + '')[0] !== '2') {\n\t\t\tthrow this.errorFromResponse(response);\n\t\t}\n\t\treturn data;\n\t}\n\n\tdispatchEvent = event => {\n\t\t// client event handlers\n\t\tthis._handleClientEvent(event);\n\n\t\t// channel event handlers\n\t\tconst cid = event.cid;\n\t\tconst channel = this.activeChannels[cid];\n\t\tif (channel) {\n\t\t\tchannel._handleChannelEvent(event);\n\t\t}\n\n\t\tthis._callClientListeners(event);\n\n\t\tif (channel) {\n\t\t\tchannel._callChannelListeners(event);\n\t\t}\n\t};\n\n\thandleEvent = messageEvent => {\n\t\t// dispatch the event to the channel listeners\n\t\tconst jsonString = messageEvent.data;\n\t\tconst event = JSON.parse(jsonString);\n\t\tevent.received_at = new Date();\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t_handleClientEvent(event) {\n\t\tconst client = this;\n\t\tthis.logger(\n\t\t\t'info',\n\t\t\t`client:_handleClientEvent - Received event of type { ${event.type} }`,\n\t\t\t{\n\t\t\t\ttags: ['event', 'client'],\n\t\t\t\tevent,\n\t\t\t},\n\t\t);\n\n\t\t// update the client.state with any changes to users\n\t\tif (event.type === 'user.presence.changed' || event.type === 'user.updated') {\n\t\t\tif (event.user.id === this.userID) {\n\t\t\t\tthis.user = { ...this.user, ...event.user };\n\t\t\t\t// Updating only available properties in _user object.\n\t\t\t\tObject.keys(event.user).forEach(function(key) {\n\t\t\t\t\tif (key in client._user) {\n\t\t\t\t\t\tclient._user[key] = event.user[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tclient.state.updateUser(event.user);\n\t\t\tclient._updateUserReferences(event.user);\n\t\t}\n\t\tif (event.type === 'health.check') {\n\t\t\tif (event.me) {\n\t\t\t\tclient.user = event.me;\n\t\t\t\tclient.state.updateUser(event.me);\n\t\t\t}\n\t\t}\n\n\t\tif (event.type === 'notification.message_new') {\n\t\t\tthis.configs[event.channel.type] = event.channel.config;\n\t\t}\n\t}\n\n\t_callClientListeners = event => {\n\t\tconst client = this;\n\t\t// gather and call the listeners\n\t\tconst listeners = [];\n\t\tif (client.listeners.all) {\n\t\t\tlisteners.push(...client.listeners.all);\n\t\t}\n\t\tif (client.listeners[event.type]) {\n\t\t\tlisteners.push(...client.listeners[event.type]);\n\t\t}\n\n\t\t// call the event and send it to the listeners\n\t\tfor (const listener of listeners) {\n\t\t\tlistener(event);\n\t\t}\n\t};\n\n\trecoverState = async () => {\n\t\tthis.logger(\n\t\t\t'info',\n\t\t\t`client:recoverState() - Start of recoverState with connectionID ${this.wsConnection.connectionID}`,\n\t\t\t{\n\t\t\t\ttags: ['connection'],\n\t\t\t},\n\t\t);\n\t\tthis.connectionID = this.wsConnection.connectionID;\n\t\tconst cids = Object.keys(this.activeChannels || {});\n\t\tconst lastMessageIDs = {};\n\t\tfor (const c of Object.values(this.activeChannels)) {\n\t\t\tconst lastMessage = c.lastMessage();\n\t\t\tlet lastMessageId;\n\t\t\tif (lastMessage) {\n\t\t\t\tlastMessageId = lastMessage.id;\n\t\t\t}\n\t\t\tlastMessageIDs[c.cid] = lastMessageId;\n\t\t}\n\t\tif (cids.length) {\n\t\t\tthis.logger(\n\t\t\t\t'info',\n\t\t\t\t`client:recoverState() - Start the querying of ${cids.length} channels`,\n\t\t\t\t{ tags: ['connection', 'client'] },\n\t\t\t);\n\n\t\t\tawait this.queryChannels(\n\t\t\t\t{ cid: { $in: cids } },\n\t\t\t\t{ last_message_at: -1 },\n\t\t\t\t{ limit: 30, recovery: true, last_message_ids: lastMessageIDs },\n\t\t\t);\n\n\t\t\tthis.logger('info', 'client:recoverState() - Querying channels finished', {\n\t\t\t\ttags: ['connection', 'client'],\n\t\t\t});\n\n\t\t\tthis.dispatchEvent({\n\t\t\t\ttype: 'connection.recovered',\n\t\t\t});\n\t\t}\n\t};\n\n\t/*\n\t_updateUserReferences updates the members and watchers of the currently active channels\n\tthat contain this user\n\t*/\n\t_updateUserReferences(user) {\n\t\tconst refMap = this.state.userChannelReferences[user.id] || {};\n\t\tconst refs = Object.keys(refMap);\n\t\tfor (const channelID of refs) {\n\t\t\tconst c = this.activeChannels[channelID];\n\t\t\t// search the members and watchers and update as needed...\n\t\t\tif (c && c.state) {\n\t\t\t\tif (c.state.members[user.id]) {\n\t\t\t\t\tc.state.members = c.state.members.setIn([user.id, 'user'], user);\n\t\t\t\t}\n\t\t\t\tif (c.state.watchers[user.id]) {\n\t\t\t\t\tc.state.watchers = c.state.watchers.setIn([user.id, 'user'], user);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tasync connect() {\n\t\tthis.connecting = true;\n\t\tconst client = this;\n\t\tthis.failures = 0;\n\n\t\tif (client.userID == null) {\n\t\t\tthrow Error(\n\t\t\t\t'Call setUser or setAnonymousUser before starting the connection',\n\t\t\t);\n\t\t}\n\t\tconst params = {\n\t\t\tclient_id: client.client_id,\n\t\t\tuser_id: client.userID,\n\t\t\tuser_details: client._user,\n\t\t\tuser_token: client.userToken,\n\t\t\tserver_determines_connection_id: true,\n\t\t};\n\t\tconst qs = encodeURIComponent(JSON.stringify(params));\n\t\tif (qs.length > 1900) {\n\t\t\tthrow Error('User object is too large');\n\t\t}\n\n\t\tconst token = this._getToken();\n\n\t\tconst authType = this.getAuthType();\n\t\tclient.wsURL = `${client.wsBaseURL}/connect?json=${qs}&api_key=${\n\t\t\tthis.key\n\t\t}&authorization=${token}&stream-auth-type=${authType}&x-stream-client=${this._userAgent()}`;\n\n\t\t// The StableWSConnection handles all the reconnection logic.\n\t\tthis.wsConnection = new StableWSConnection({\n\t\t\twsURL: client.wsURL,\n\t\t\tclientID: this.clientID,\n\t\t\tuserID: this.userID,\n\t\t\trecoverCallback: this.recoverState,\n\t\t\tmessageCallback: this.handleEvent,\n\t\t\teventCallback: this.dispatchEvent,\n\t\t\tlogger: this.logger,\n\t\t});\n\n\t\tconst handshake = await this.wsConnection.connect();\n\t\tthis.connectionID = this.wsConnection.connectionID;\n\t\treturn handshake;\n\t}\n\n\t/**\n\t * queryUsers - Query users and watch user presence\n\t *\n\t * @param {object} filterConditions MongoDB style filter conditions\n\t * @param {object} sort             Sort options, for instance {last_active: -1}\n\t * @param {object} options          Option object, {presence: true}\n\t *\n\t * @return {object} User Query Response\n\t */\n\tasync queryUsers(filterConditions, sort, options) {\n\t\tif (!sort) {\n\t\t\tsort = {};\n\t\t}\n\t\tif (!options) {\n\t\t\toptions = {};\n\t\t}\n\t\tconst sortFields = [];\n\t\tfor (const [k, v] of Object.entries(sort)) {\n\t\t\tsortFields.push({ field: k, direction: v });\n\t\t}\n\n\t\tconst defaultOptions = {\n\t\t\tpresence: true,\n\t\t};\n\n\t\t// Make sure we wait for the connect promise if there is a pending one\n\t\tawait this.wsPromise;\n\n\t\tif (!this._hasConnectionID()) {\n\t\t\tdefaultOptions.presence = false;\n\t\t}\n\n\t\t// Return a list of users\n\t\tconst data = await this.get(this.baseURL + '/users', {\n\t\t\tpayload: {\n\t\t\t\tfilter_conditions: filterConditions,\n\t\t\t\tsort: sortFields,\n\t\t\t\t...defaultOptions,\n\t\t\t\t...options,\n\t\t\t},\n\t\t});\n\n\t\tthis.state.updateUsers(data.users);\n\n\t\treturn data;\n\t}\n\n\tasync queryChannels(filterConditions, sort = {}, options = {}) {\n\t\tconst sortFields = [];\n\n\t\tfor (const [k, v] of Object.entries(sort)) {\n\t\t\tsortFields.push({ field: k, direction: v });\n\t\t}\n\n\t\tconst defaultOptions = {\n\t\t\tstate: true,\n\t\t\twatch: true,\n\t\t\tpresence: false,\n\t\t};\n\n\t\t// Make sure we wait for the connect promise if there is a pending one\n\t\tawait this.wsPromise;\n\n\t\tif (!this._hasConnectionID()) {\n\t\t\tdefaultOptions.watch = false;\n\t\t}\n\n\t\t// Return a list of channels\n\t\tconst payload = {\n\t\t\tfilter_conditions: filterConditions,\n\t\t\tsort: sortFields,\n\t\t\tuser_details: this._user,\n\t\t\t...defaultOptions,\n\t\t\t...options,\n\t\t};\n\n\t\tconst data = await this.get(this.baseURL + '/channels', {\n\t\t\tpayload,\n\t\t});\n\n\t\tconst channels = [];\n\n\t\t// update our cache of the configs\n\t\tfor (const channelState of data.channels) {\n\t\t\tthis._addChannelConfig(channelState);\n\t\t}\n\n\t\tfor (const channelState of data.channels) {\n\t\t\tconst c = this.channel(channelState.channel.type, channelState.channel.id);\n\t\t\tc.data = channelState.channel;\n\t\t\tc.initialized = true;\n\t\t\tc._initializeState(channelState);\n\t\t\tchannels.push(c);\n\t\t}\n\t\treturn channels;\n\t}\n\n\tasync search(filterConditions, query, options = {}) {\n\t\t// Return a list of channels\n\t\tconst payload = {\n\t\t\tfilter_conditions: filterConditions,\n\t\t\tquery,\n\t\t\t...options,\n\t\t};\n\n\t\t// Make sure we wait for the connect promise if there is a pending one\n\t\tawait this.wsPromise;\n\n\t\tconst data = await this.get(this.baseURL + '/search', {\n\t\t\tpayload,\n\t\t});\n\n\t\treturn data;\n\t}\n\n\t/**\n\t * addDevice - Adds a push device for a user.\n\t *\n\t * @param {string} id the device id\n\t * @param {string} push_provider the push provider (apn or firebase)\n\t * @param {string} [userID] the user id (defaults to current user)\n\t *\n\t */\n\tasync addDevice(id, push_provider, userID = null) {\n\t\treturn await this.post(this.baseURL + '/devices', {\n\t\t\tid,\n\t\t\tpush_provider,\n\t\t\t...(userID != null ? { user_id: userID } : {}),\n\t\t});\n\t}\n\n\t/**\n\t * getDevices - Returns the devices associated with a current user\n\t *\n\t * @param {string} [userID] User ID. Only works on serversidex\n\t *\n\t * @return {devices} Array of devices\n\t */\n\tasync getDevices(userID) {\n\t\treturn await this.get(\n\t\t\tthis.baseURL + '/devices',\n\t\t\tuserID ? { user_id: userID } : {},\n\t\t);\n\t}\n\n\t/**\n\t * removeDevice - Removes the device with the given id. Clientside users can only delete their own devices\n\t *\n\t * @param {string} id The device id\n\t * @param {string} [userID] The user id. Only specify this for serverside requests\n\t *\n\t */\n\tasync removeDevice(id, userID = null) {\n\t\treturn await this.delete(this.baseURL + '/devices', {\n\t\t\tid,\n\t\t\t...(userID ? { user_id: userID } : {}),\n\t\t});\n\t}\n\n\t_addChannelConfig(channelState) {\n\t\tthis.configs[channelState.channel.type] = channelState.channel.config;\n\t}\n\n\t/**\n\t * channel - Returns a new channel with the given type and id\n\t *\n\t * @param {string} channelType The channel type\n\t * @param {string} channelID   The channel data\n\t * @param {object} [custom]      Custom data to attach to the channel\n\t *\n\t * @return {channel} The channel object, initialize it using channel.watch()\n\t */\n\tchannel(channelType, channelID, custom = {}) {\n\t\tif (!this.userID && !this._isUsingServerAuth()) {\n\t\t\tthrow Error('Call setUser or setAnonymousUser before creating a channel');\n\t\t}\n\t\tif (~channelType.indexOf(':')) {\n\t\t\tthrow Error(\n\t\t\t\t`Invalid channel group ${channelType}, cant contain the : character`,\n\t\t\t);\n\t\t}\n\n\t\tif (typeof channelID === 'string') {\n\t\t\tchannelID = channelID + '';\n\t\t\tif (~channelID.indexOf(':')) {\n\t\t\t\tthrow Error(\n\t\t\t\t\t`Invalid channel id ${channelID}, cant contain the : character`,\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\t// support the 2 param init method\n\t\t\tcustom = channelID || {};\n\t\t\tchannelID = undefined;\n\t\t}\n\n\t\t// there are two ways of solving this,\n\t\t// a. only allow 1 channel object per cid\n\t\t// b. broadcast events to all channels\n\t\t// the first option seems less likely to trip up devs\n\t\tlet channel;\n\t\tif (channelID) {\n\t\t\tconst cid = `${channelType}:${channelID}`;\n\t\t\tif (cid in this.activeChannels) {\n\t\t\t\tchannel = this.activeChannels[cid];\n\t\t\t\tif (Object.keys(custom).length > 0) {\n\t\t\t\t\tchannel.data = custom;\n\t\t\t\t\tchannel._data = custom;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tchannel = new Channel(this, channelType, channelID, custom);\n\t\t\t\tthis.activeChannels[channel.cid] = channel;\n\t\t\t}\n\t\t} else {\n\t\t\tchannel = new Channel(this, channelType, undefined, custom);\n\t\t}\n\n\t\treturn channel;\n\t}\n\n\t/**\n\t * updateUser - Update or Create the given user object\n\t *\n\t * @param {object} A user object, the only required field is the user id. IE {id: \"myuser\"} is valid\n\t *\n\t * @return {object}\n\t */\n\tasync updateUser(userObject) {\n\t\treturn await this.updateUsers([userObject]);\n\t}\n\n\t/**\n\t * partialUpdateUser - Update the given user object\n\t *\n\t * @param {object} Object which should contain id and any of \"set\" or \"unset\" params;\n\t * example: {id: \"user1\", set:{field: value}, unset:[\"field2\"]}\n\t *\n\t * @return {object} list of updated users\n\t */\n\tasync partialUpdateUser(userObject) {\n\t\treturn await this.partialUpdateUsers([userObject]);\n\t}\n\n\t/**\n\t * updateUsers - Batch update the list of users\n\t *\n\t * @param {array} A list of users\n\t *\n\t * @return {object}\n\t */\n\tasync updateUsers(users) {\n\t\tconst userMap = {};\n\t\tfor (const userObject of users) {\n\t\t\tif (!userObject.id) {\n\t\t\t\tthrow Error('User ID is required when updating a user');\n\t\t\t}\n\t\t\tuserMap[userObject.id] = userObject;\n\t\t}\n\n\t\treturn await this.post(this.baseURL + '/users', {\n\t\t\tusers: userMap,\n\t\t});\n\t}\n\n\t/**\n\t * updateUsers - Batch partial update of users\n\t *\n\t * @param {array} A list of partial update requests\n\t *\n\t * @return {object}\n\t */\n\tasync partialUpdateUsers(users) {\n\t\tfor (const userObject of users) {\n\t\t\tif (!userObject.id) {\n\t\t\t\tthrow Error('User ID is required when updating a user');\n\t\t\t}\n\t\t}\n\n\t\treturn await this.patch(this.baseURL + '/users', {\n\t\t\tusers,\n\t\t});\n\t}\n\n\tasync deleteUser(userID, params) {\n\t\treturn await this.delete(this.baseURL + `/users/${userID}`, params);\n\t}\n\n\tasync reactivateUser(userID, options) {\n\t\treturn await this.post(this.baseURL + `/users/${userID}/reactivate`, {\n\t\t\t...options,\n\t\t});\n\t}\n\n\tasync deactivateUser(userID, options) {\n\t\treturn await this.post(this.baseURL + `/users/${userID}/deactivate`, {\n\t\t\t...options,\n\t\t});\n\t}\n\n\tasync exportUser(userID, options) {\n\t\treturn await this.get(this.baseURL + `/users/${userID}/export`, {\n\t\t\t...options,\n\t\t});\n\t}\n\n\t/** banUser - bans a user from all channels\n\t *\n\t * @param targetUserID\n\t * @param options\n\t * @returns {Promise<*>}\n\t */\n\tasync banUser(targetUserID, options) {\n\t\treturn await this.post(this.baseURL + '/moderation/ban', {\n\t\t\ttarget_user_id: targetUserID,\n\t\t\t...options,\n\t\t});\n\t}\n\n\t/** unbanUser - revoke global ban for a user\n\t *\n\t * @param targetUserID\n\t * @returns {Promise<*>}\n\t */\n\tasync unbanUser(targetUserID, options) {\n\t\treturn await this.delete(this.baseURL + '/moderation/ban', {\n\t\t\ttarget_user_id: targetUserID,\n\t\t\t...options,\n\t\t});\n\t}\n\n\t/** muteUser - mutes a user\n\t *\n\t * @param targetID\n\t * @param [userID] Only used with serverside auth\n\t * @returns {Promise<*>}\n\t */\n\tasync muteUser(targetID, userID = null) {\n\t\treturn await this.post(this.baseURL + '/moderation/mute', {\n\t\t\ttarget_id: targetID,\n\t\t\t...(userID ? { user_id: userID } : {}),\n\t\t});\n\t}\n\n\t/** unmuteUser - unmutes a user\n\t *\n\t * @param targetID\n\t * @param [userID] Only used with serverside auth\n\t * @returns {Promise<*>}\n\t */\n\tasync unmuteUser(targetID, userID = null) {\n\t\treturn await this.post(this.baseURL + '/moderation/unmute', {\n\t\t\ttarget_id: targetID,\n\t\t\t...(userID ? { user_id: userID } : {}),\n\t\t});\n\t}\n\n\tasync flagMessage(messageID) {\n\t\treturn await this.post(this.baseURL + '/moderation/flag', {\n\t\t\ttarget_message_id: messageID,\n\t\t});\n\t}\n\n\tasync flagUser(userID) {\n\t\treturn await this.post(this.baseURL + '/moderation/flag', {\n\t\t\ttarget_user_id: userID,\n\t\t});\n\t}\n\n\tasync unflagMessage(messageID) {\n\t\treturn await this.post(this.baseURL + '/moderation/unflag', {\n\t\t\ttarget_message_id: messageID,\n\t\t});\n\t}\n\n\tasync unflagUser(userID) {\n\t\treturn await this.post(this.baseURL + '/moderation/unflag', {\n\t\t\ttarget_user_id: userID,\n\t\t});\n\t}\n\n\t/**\n\t * markAllRead - marks all channels for this user as read\n\t *\n\t * @return {Promise} Description\n\t */\n\tasync markAllRead(data = {}) {\n\t\tconst response = await this.post(this.baseURL + '/channels/read', {\n\t\t\t...data,\n\t\t});\n\t}\n\n\tcreateChannelType(data) {\n\t\tconst channelData = Object.assign({}, { commands: ['all'] }, data);\n\t\treturn this.post(this.baseURL + '/channeltypes', channelData);\n\t}\n\n\tgetChannelType(channelType) {\n\t\treturn this.get(this.baseURL + `/channeltypes/${channelType}`);\n\t}\n\n\tupdateChannelType(channelType, data) {\n\t\treturn this.put(this.baseURL + `/channeltypes/${channelType}`, data);\n\t}\n\n\tdeleteChannelType(channelType) {\n\t\treturn this.delete(this.baseURL + `/channeltypes/${channelType}`);\n\t}\n\n\tlistChannelTypes() {\n\t\treturn this.get(this.baseURL + `/channeltypes`);\n\t}\n\n\t/**\n\t * updateMessage - Update the given message\n\t *\n\t * @param {object} message object, id needs to be specified\n\t *\n\t * @return {object} Response that includes the message\n\t */\n\tasync updateMessage(message, userId) {\n\t\tif (!message.id) {\n\t\t\tthrow Error('Please specify the message id when calling updateMesssage');\n\t\t}\n\n\t\tconst clonedMessage = Object.assign({}, message);\n\t\tdelete clonedMessage.id;\n\n\t\tconst reservedMessageFields = [\n\t\t\t'latest_reactions',\n\t\t\t'own_reactions',\n\t\t\t'reply_count',\n\t\t\t'reaction_counts',\n\t\t\t'created_at',\n\t\t\t'updated_at',\n\t\t\t'html',\n\t\t\t'command',\n\t\t\t'type',\n\t\t\t'user',\n\t\t];\n\n\t\treservedMessageFields.forEach(function(item) {\n\t\t\tif (clonedMessage[item] != null) {\n\t\t\t\tdelete clonedMessage[item];\n\t\t\t}\n\t\t});\n\n\t\tif (userId != null) {\n\t\t\tif (typeof userId == 'string' || userId instanceof String) {\n\t\t\t\tclonedMessage.user_id = userId;\n\t\t\t} else {\n\t\t\t\tclonedMessage.user = { id: userId.id };\n\t\t\t}\n\t\t}\n\t\treturn await this.post(this.baseURL + `/messages/${message.id}`, {\n\t\t\tmessage: clonedMessage,\n\t\t});\n\t}\n\n\tasync deleteMessage(messageID, hardDelete) {\n\t\tlet params = {};\n\t\tif (hardDelete) {\n\t\t\tparams = { hard: true };\n\t\t}\n\t\treturn await this.delete(this.baseURL + `/messages/${messageID}`, params);\n\t}\n\n\tasync getMessage(messageID) {\n\t\treturn await this.get(this.baseURL + `/messages/${messageID}`);\n\t}\n\n\t_userAgent() {\n\t\treturn `stream-chat-javascript-client-${this.node ? 'node' : 'browser'}-${\n\t\t\tpkg.version\n\t\t}`;\n\t}\n\n\t/**\n\t * _isUsingServerAuth - Returns true if we're using server side auth\n\t */\n\t_isUsingServerAuth = () => {\n\t\t// returns if were in server side mode or not...\n\t\tconst serverAuth = !!this.secret;\n\t\treturn serverAuth;\n\t};\n\n\t_addClientParams(params = {}) {\n\t\tconst token = this._getToken();\n\n\t\treturn {\n\t\t\t...this.options,\n\t\t\tparams: {\n\t\t\t\tuser_id: this.userID,\n\t\t\t\t...params,\n\t\t\t\tapi_key: this.key,\n\t\t\t\tconnection_id: this.connectionID,\n\t\t\t},\n\t\t\theaders: {\n\t\t\t\tAuthorization: token,\n\t\t\t\t'stream-auth-type': this.getAuthType(),\n\t\t\t\t'x-stream-client': this._userAgent(),\n\t\t\t},\n\t\t};\n\t}\n\n\t_getToken() {\n\t\tif (this.secret == null && this.userToken == null && !this.anonymous) {\n\t\t\tthrow new Error(\n\t\t\t\t`Both secret and user tokens are not set. Either client.setUser wasn't called or client.disconnect was called`,\n\t\t\t);\n\t\t}\n\t\tlet token = '';\n\t\tif (!this.anonymous) {\n\t\t\ttoken = this.userToken != null ? this.userToken : JWTServerToken(this.secret);\n\t\t}\n\t\treturn token;\n\t}\n\n\t_startCleaning() {\n\t\tconst that = this;\n\t\tif (this.cleaningIntervalRef != null) {\n\t\t\treturn;\n\t\t}\n\t\tthis.cleaningIntervalRef = setInterval(() => {\n\t\t\t// call clean on the channel, used for calling the stop.typing event etc.\n\t\t\tfor (const channel of Object.values(that.activeChannels)) {\n\t\t\t\tchannel.clean();\n\t\t\t}\n\t\t}, 500);\n\t}\n\n\tverifyWebhook(requestBody, xSignature) {\n\t\treturn CheckSignature(requestBody, this.secret, xSignature);\n\t}\n}\n"],"names":["_extends","module","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","arr","Array","isArray","Symbol","iterator","toString","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","err","TypeError","arrayWithHoles","iterableToArrayLimit","nonIterableRest","excluded","sourceKeys","keys","indexOf","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","runtime","exports","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","GenStateSuspendedYield","makeInvokeMethod","fn","obj","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","Promise","resolve","reject","invoke","result","__await","then","unwrapped","error","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","iter","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","asyncGeneratorStep","gen","_next","_throw","args","arr2","from","arrayWithoutHoles","iterableToArray","nonIterableSpread","instance","Constructor","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","_typeof2","_typeof","thisArg","val","isObject","isFunction","l","isArrayBuffer","isBuffer","isFormData","FormData","isArrayBufferView","ArrayBuffer","isView","buffer","isString","isNumber","isUndefined","isDate","isFile","isBlob","isStream","pipe","isURLSearchParams","URLSearchParams","isStandardBrowserEnv","navigator","product","window","document","merge","assignValue","extend","a","b","bind","trim","str","replace","message","config","code","request","response","enhanceError","encode","encodeURIComponent","ignoreDuplicateOf","utils","originURL","msie","test","userAgent","urlParsingNode","createElement","resolveURL","url","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","location","requestURL","parsed","write","expires","path","domain","secure","cookie","Date","toGMTString","join","read","match","RegExp","decodeURIComponent","remove","now","requestData","data","requestHeaders","headers","XMLHttpRequest","auth","username","password","Authorization","btoa","open","toUpperCase","params","paramsSerializer","serializedParams","parts","v","toISOString","JSON","stringify","buildURL","timeout","onreadystatechange","readyState","status","responseURL","responseHeaders","getAllResponseHeaders","split","line","substr","toLowerCase","concat","responseType","responseText","statusText","validateStatus","createError","settle","onerror","ontimeout","cookies","require$$0","xsrfValue","withCredentials","isURLSameOrigin","xsrfCookieName","xsrfHeaderName","setRequestHeader","e","onDownloadProgress","addEventListener","onUploadProgress","upload","cancelToken","promise","cancel","abort","send","DEFAULT_CONTENT_TYPE","Content-Type","setContentTypeIfUnset","adapter","defaults","process","require$$1","transformRequest","normalizedName","normalizeHeaderName","transformResponse","parse","maxContentLength","common","Accept","InterceptorManager","handlers","use","fulfilled","rejected","eject","id","h","fns","__CANCEL__","throwIfCancellationRequested","throwIfRequested","baseURL","relativeURL","transformData","reason","isCancel","Axios","instanceConfig","interceptors","chain","dispatchRequest","interceptor","unshift","shift","Cancel","CancelToken","executor","resolvePromise","token","c","createInstance","defaultConfig","axios","require$$2","all","promises","spread","callback","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","rnds","r","Math","random","byteToHex","buf","offset","bth","options","rng","ii","bytesToUuid","Immutable","immutableInit","REACT_ELEMENT_TYPE","for","REACT_ELEMENT_TYPE_FALLBACK","globalConfig","use_static","instantiateEmptyObject","addPropertyTo","methodName","banProperty","ImmutableError","Boolean","immutabilityTag","isImmutable","getOwnPropertyDescriptor","isEqual","isMergableObject","mutatingObjectMethods","mutatingArrayMethods","nonMutatingArrayMethods","mutatingDateMethods","stack","makeImmutable","bannedMethods","index","freeze","makeMethodReturnImmutable","currentMethod","arraySet","idx","deep","mode","mutable","asMutableArray","makeImmutableArray","immutableEmptyArray","arraySetIn","pth","head","newValue","tail","thisHead","setIn","nextHead","isFinite","objectSetIn","immutableEmptyObject","array","flatMap","asObject","update","updateIn","getIn","asMutableDate","getTime","iteratorResult","without","keysToRemoveArray","el","makeImmutableObject","opts","asDeepMutable","pair","asMutable","quickCopy","src","dest","other","receivedArray","merger","addToResult","currentObj","otherObj","immutableValue","mergerResult","currentValue","otherFromArray","clearDroppedKeys","objectReplace","fnObject","fnArray","fnDate","objectSet","property","updater","restArgs","initialVal","set","getInPath","defaultValue","asMutableObject","instantiatePlainObject","stackRemaining","$$typeof","isReactElement","File","isFileObject","Blob","isBlobObject","isError","isPromise","date","clone","toStatic","toStaticObjectOrArray","static","byDate","created_at","ChannelState","channel","_channel","watcher_count","typing","messages","threads","mutedUsers","watchers","members","last_message_at","newMessage","addMessagesSorted","__html","html","updated_at","newMessages","initializing","parsedMessages","parsedMsg","messageToImmutable","updatedThreads","parent_id","show_in_channel","_addToMessageList","parentID","thread","threadMessages","sort","reaction","_addReactionToMessage","message_id","_removeReactionFromMessage","getClient","userID","user","old","filterReaction","filter","item","updated","messageToRemove","removed","filteredMessages","entries","lastEvent","received_at","dispatchEvent","cid","EVENT_MAP","isValidEventType","eventType","logChatPromiseExecution","console","warn","sleep","m","setTimeout","Channel","client","watch","presence","_this","query","event","listeners","listener","_client","_data","initialized","lastTypingEvent","isTyping","disconnected","configs","post","_channelURL","uri","contentType","sendFile","delete","_checkInitialized","messageID","user_id","body","reactionType","channelData","updateMessage","accept_invite","reject_invite","add_members","add_moderators","remove_members","demote_moderators","formData","form_data","getConfig","typing_events","diff","lastKeyStroke","sendEvent","min","lastMessage","max","messageSlice","read_events","stopTyping","clean","defaultOptions","wsPromise","_hasConnectionID","combined","_initializeState","logger","tags","get","last_read","lastRead","count","mentioned_users","map","u","queryURL","activeChannels","_addChannelConfig","targetUserID","banUser","userId","unbanUser","callbackOrString","callbackOrNothing","s","addMessageSorted","member","addReaction","removeReaction","_isUsingServerAuth","updateUserReference","w","watcher","parsedRead","ClientState","users","userChannelReferences","updateUser","channelID","ws","WebSocket","MozWebSocket","global","StableWSConnection","wsURL","clientID","messageCallback","recoverCallback","eventCallback","_setHealth","isHealthy","_reconnect","wsID","isResolved","rejectPromise","consecutiveFailures","totalFailures","_errorFromWSEvent","healthy","online","isWSFailure","onlineStatusChanged","removeEventListener","that","connectionOpen","isConnecting","healthCheckInterval","monitorInterval","_listenForConnectionChanges","_connect","healthCheck","_startMonitor","_startHealthCheck","_context","isClosedPromise","healthCheckIntervalRef","clearInterval","monitorIntervalRef","_removeConnectionListeners","removeAllListeners","close","onclose","_setupConnectionPromise","isoWS","onopen","onmessage","connectionID","connection_id","interval","_retryInterval","_destroyCurrentWSConnection","_context3","floor","setInterval","client_id","_this2","JWTUserToken","apiSecret","extraData","jwtOptions","payload","algorithm","noTimestamp","jwt","sign","UserFromToken","fragments","x","String","fromCharCode","L","decodeBase64","__self__","root","F","fetch","DOMException","support","searchParams","blob","arrayBuffer","viewClasses","normalizeName","normalizeValue","iteratorFor","items","Headers","append","header","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","onload","readBlobAsArrayBuffer","FileReader","readAsArrayBuffer","bufferClone","view","byteLength","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","_bodyFormData","DataView","_bodyArrayBuffer","text","readAsText","chars","readArrayBufferAsText","decode","json","oldValue","has","methods","Request","input","upcased","credentials","signal","referrer","form","bytes","Response","bodyInit","ok","redirectStatuses","redirect","RangeError","init","aborted","xhr","abortXhr","rawHeaders","onabort","polyfill","StreamChat","secretOrOptions","_handleClientEvent","_handleChannelEvent","_callClientListeners","_callChannelListeners","messageEvent","jsonString","wsConnection","cids","lastMessageIDs","lastMessageId","queryChannels","$in","limit","recovery","last_message_ids","secret","userToken","browser","node","nodeOptions","httpAgent","http","Agent","keepAlive","httpsAgent","https","setBaseURL","env","STREAM_LOCAL_TEST_RUN","anonymous","Buffer","wsBaseURL","UUID","uuidv4","connect","_startCleaning","createToken","tokenUserId","_setUser","_setupConnection","_user","apn_config","p12_cert","patch","apnTemplate","apn_template","firebaseTemplate","firebase_template","cleaningIntervalRef","connectionEstablishedCount","_disconnect","disconnect","anon","last_active","guestUser","setUser","access_token","exp","extra","unsubscribe","_logApiRequest","_addClientParams","_logApiResponse","handleResponse","_logApiError","_context6","put","_context7","_context8","_context9","_context10","_read","_readableState","fileField","getAuthType","errorFromResponse","_updateUserReferences","me","refMap","connecting","failures","user_details","user_token","server_determines_connection_id","qs","_getToken","authType","_userAgent","recoverState","handleEvent","handshake","filterConditions","sortFields","k","field","direction","filter_conditions","updateUsers","channels","channelState","push_provider","channelType","custom","userObject","partialUpdateUsers","userMap","target_user_id","targetID","target_id","target_message_id","commands","clonedMessage","hardDelete","hard","pkg","api_key","server","JWTServerToken","requestBody","xSignature","signature","createHmac","digest"],"mappings":"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"}