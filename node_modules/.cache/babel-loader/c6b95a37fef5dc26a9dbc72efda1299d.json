{"ast":null,"code":"'use strict';\n\nconst Transform = require('stream').Transform;\n\nclass LastNewline extends Transform {\n  constructor() {\n    super();\n    this.lastByte = false;\n  }\n\n  _transform(chunk, encoding, done) {\n    if (chunk.length) {\n      this.lastByte = chunk[chunk.length - 1];\n    }\n\n    this.push(chunk);\n    done();\n  }\n\n  _flush(done) {\n    if (this.lastByte === 0x0a) {\n      return done();\n    }\n\n    if (this.lastByte === 0x0d) {\n      this.push(Buffer.from('\\n'));\n      return done();\n    }\n\n    this.push(Buffer.from('\\r\\n'));\n    return done();\n  }\n\n}\n\nmodule.exports = LastNewline;","map":null,"metadata":{},"sourceType":"script"}